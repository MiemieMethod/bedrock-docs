---
title: 生物群系
category: 一般
tags:
    - 指南
    - 实验性
mentions:
    - SirLich
    - solvedDev
    - stirante
    - Joelant05
    - destruc7ion
    - SmokeyStack
    - MedicalJewel105
    - aexer0e
    - Apex360
    - Luthorius
    - TheItsNameless
    - ThomasOrs
    - SmokeyStack
description: 生物群系指南。
---

_Last updated for 1.16.210_

:::warning
自1.18版本起，Minecraft基岩版的自定义生物群系功能已损坏。
:::

:::warning
生物群系自定义为**实验性**功能。每个使用包含生物群系定义的行为包的世界必须启用实验性游戏玩法切换。当前可用的功能如果声明正确，运行良好；然而，组件和属性声明不正确可能导致崩溃，而不仅仅是记录错误。此外，由于[继承模型](#inheritance)引起的问题，自定义生物群系所使用的模式目前构建不佳。
:::

:::warning
截至1.16.210版本，[下界生物群系生成](#the-nether)存在错误。下界生物群系现在通过`"multinoise_generation_rules"`组件进行自定义。然而，自定义生物群系目前无法与此组件一起生成。同时，香草覆盖中使用旧的`"nether_generation_rules"`组件将导致该生物群系在下界中不生成。
:::

行为包允许自定义生物群系。一个行为包可以创建全新的**自定义生物群系**或[**覆盖先前声明的生物群系**](#inheritance)，例如香草生物群系。生物群系钩入关键的游戏机制，如怪物生成、数据驱动的游戏玩法以及自定义方块的呈现。生物群系还启用一个强大的系统，用于添加如花卉和树木等装饰，甚至是塔楼和房屋等结构；这些装饰和结构统称为[地物](#/concepts/features/)，它们对世界生成至关重要，但（通常）在范围和构造上与生物群系分离。

虽然覆盖和自定义生物群系提供了大体相同的功能，但推荐使用自定义生物群系来创建全新的游戏体验。覆盖应保留原始生物群系的身份和意图，仅适用于：

- 轻微的表面、高度图或气候调整
- 在世界生成中重新分配生物群系稀有度
- 添加新的地物或怪物，但仅在主题上适合的情况下

当需要任何独特的游戏体验或对先前声明的生物群系进行调整以根本改变其性质时，应使用自定义生物群系。自定义生物群系突出的情况包括：

- 需要新的或激进的地形以实现美学效果。
- 需要生成自定义地物，如新类型的树木。
- 希望获得替代或更具挑战性的游戏体验，可能使用新的怪物和结构。

> 由于生物群系模式中的疏忽，这些建议有一些例外。例如，当试图在额外的位置强制生成香草主世界生物群系时，可能看起来只需要香草覆盖，但由于[生物群系注册方式](#regions)，这可能是不可能的。这意味着生物群系的美学可能需要在多个生物群系定义文件的迭代中克隆，每个文件根据需要调整其生成规则。

## 生物群系定义

生物群系在行为包的顶层`biomes`目录中以`*biome_name*.json`或`*biome_name*.biome.json`形式的文件中声明。`biomes`目录内的子目录不能用于分组生物群系定义；`biomes`子目录中的所有定义将被忽略。

[因为标识符必须与文件名匹配](#description)，可能会与其他声明生物群系的包发生命名空间冲突。避免冲突的一种策略是使用反向域名命名法。_biome_name_可以包含点以嵌套顺序分组生物群系，例如`biomes/fancycraft.fantasy_realms.magical_springs.hills.mutated.json`。这里，`fancycraft`是开发者，`fantasy_realms`是行为包，`magical_springs`是[顶级生物群系](#heirarchy)名称，`hills`和`mutated`是[子生物群系](#subbiome-types)类型，`json`是必需的文件扩展名。（此示例中省略了可选的`.biome`扩展名。）

> 在顶层`biomes`目录中声明的无效JSON文件更可能记录错误，但它们可能导致崩溃。直接放置在此目录中的非JSON文件将被忽略。如果`biomes`目录中直接存在以`.`开头的文件，游戏当前总是崩溃。这可能会导致用于项目配置的文件甚至是macOS上的臭名昭著的 [.DS_Store 文件](https://en.wikipedia.org/wiki/.DS_Store)等文件出现问题。

### 格式

与行为包中的所有构造资产一样，生物群系定义使用JSON编写，例如：

```json title=""
{
	"format_version": "1.13.0",

	"minecraft:biome": {
		"description": {
			"identifier": "pumpkin_pastures"
		},

		"components": {
			"minecraft:surface_parameters": {
				"foundation_material": "minecraft:stone",

				"top_material": "minecraft:grass",
				"mid_material": "minecraft:dirt",

				"sea_floor_depth": 4,
				"sea_material": "minecraft:water",
				"sea_floor_material": "minecraft:sand"
			},
			"minecraft:overworld_height": {
				"noise_params": [0.125, 0.0625]
			},

			"minecraft:climate": {
				"temperature": 0.375,
				"downfall": 0.25,
				"snow_accumulation": [0, 0.5]
			},

			"minecraft:overworld_generation_rules": {
				"generate_for_climates": [["cold", 1]],

				"hills_transformation": "pumpkin_pastures_hills",
				"shore_transformation": "pumpkin_pastures"
			},

			"overworld": {},
			"pumpkin_pastures": {},

			"animal": {},
			"monster": {}
		}
	}
}
```

> 无效的JSON — 像所有附加包的方面一样 — 会导致生物群系定义失败；该生物群系将不会在世界中生成。不幸的是，不会抛出错误。使用JSON验证器和/或语法高亮工具可以轻松解决这个问题。

#### 格式版本

```json title=""
"format_version": "1.13.0"
```

顶层属性`"format_version"`描述了后续模式遵循的版本规范。生物群系的最新`"format_version"`为`"1.13.0"`。

> 以前存在1.12版本，但已被弃用，且在新版本中无法使用。在该版本中，生物群系标识符充当顶层对象属性的键，该属性本身直接包含格式版本、组件和标签。本文件仅使用`"1.13.0"`格式，但弃用的版本可能在其他地方见到。

版本必须采用`*release*.*major*.*minor*`的形式，其中_release_、_major_或两者都可选。所有3个标识符必须是整数，但完成的版本号不必代表Minecraft的实际版本。目前，任何大于或等于`1.13.0`的版本号都可以使用，并将引用`1.13.0`规范，但建议仅使用值`1.13.0`或开发期间的目标版本：未来版本可能会影响整体模式。

#### 生物群系规范

```json title=""
"minecraft:biome": {
	…
}
```

另一个顶层属性是`"minecraft:biome"`，它建立了生物群系定义的模式。

##### 描述

```json title=""
"description": {
	"identifier": "pumpkin_pastures"
}
```

`"minecraft:biome"`属性的`"description"`属性用作生物群系的元数据。目前仅包含一个属性`"identifier"`，用于唯一标识生物群系。此值必须与文件名匹配，去除`.json`或`.biome.json`扩展名。例如，如果标识符为`prairie`，文件名必须为`prairie.json`或`prairie.biome.json`。此标识符用于引用多个生物群系定义属性。

> 与附加包的其他方面不同，生物群系在其标识符中不接受忽略文件名的命名空间前缀（如`elysium:`）。可以提供这样的前缀，但文件必须包含前缀，包括冒号；许多支持Minecraft的文件系统中此类文件名无效，因此不应使用这种传统命名空间系统。请考虑使用[反向域名系统](#biome-definitions)代替。

##### 组件

```json title=""
"components": {
	…
}
```

`"minecraft:biome"`属性还包含`"components"`属性，这是生物群系定义的核心。此处声明的组件定义了、塑造并风格化生物群系。

> 组件的详细信息散布在本文档的其余部分；由于它们交互的复杂性，无法像这些包装属性那样整洁地描述或组织。

组件始终是对象属性，即使那些看似应作为布尔值的组件。例如，`"minecraft:ignore_automatic_features"`组件属性不是分配`true`或`false`，而是一个空对象`{}`：

```json
"components": {
	…

	"minecraft:ignore_automatic_features": {}
}
```

虽然JSON可能无效，但具有相同名称的组件属性可以在`"components"`对象内使用。虽然应避免这种情况，但应注意游戏仅使用最后提供的组件实例：之前定义的组件内的值将被完全忽略。例如：

```json
"components": {
	…

	"minecraft:overworld_height": {
		"noise_type": "ocean"
	},
	"minecraft:overworld_height": {
		"noise_params": [1.25, 0]
	}
}
```

尽管`"noise_type"`属性通常会[完全覆盖](#heightmap)`"noise_params"`属性，但由于`"components”`对象内组件的顺序，此示例中的预设将被忽略。

当组件在生物群系定义中使用时，必须提供其所有必需属性；否则，将抛出错误，生物群系将无法生成。

> 由于继承模型的工作方式，如果生物群系定义的继承链中不完整的组件包含完成该组件模式所需的属性，则该组件将正常工作。有趣的是，当两个组件都位于同一个生物群系定义文件中时，这种情况不成立。如前所述，尽管组件缺少必需属性，但只有后者的组件将被使用。

###### 标签

```json title=""
"components": {
	…

	"overworld": {},
	"pumpkin_pastures": {},

	"animal": {},
	"monster": {}
}
```

除了用于创建生物群系的组件外，`"components"`属性还允许添加任意标签。标签看起来像空的组件，例如`"animal": {}`。标签名称必须符合正则表达式`[a-z0-9_.:]+`，即小写拉丁字母、阿拉伯数字、下划线、句点和冒号。

> 为了面向未来，不建议创建以`minecraft:`为前缀的标签，以确保标签不会与未来Mojang定义的组件冲突。此外，建议使用包特定的命名空间，如`"betterbiomes:arboreal"`，以最小化与其他行为包的冲突。

### 继承

生物群系定义文件可以根据行为包的排序充当初始定义或覆盖。行为包堆栈中生物群系定义的最早出现标志着自定义生物群系的创建；堆栈中后续对同一生物群系的定义可以通过继承修改或覆盖早期的定义。

只有`"components"`属性中的组件和标签会被继承。通常，单个组件内的属性也会被继承。不幸的是，由于某些组件或组件属性对象需要完全重新声明其所有属性才能正常工作，因此在覆盖时通常最好重新声明整个组件。除非新的组件会干扰之前存在的组件，否则继承总是发生，通常情况下这是[表面构建器](#inheritance-considerations)的情况。

无法指示应从早期定义中移除某个属性。这在使用标签来标识生物群系放置位置以及它们如何驱动其他游戏机制（如怪物生成）时尤其麻烦。如果由于继承问题导致冲突，建议将生物群系的所需元素提取到新的自定义生物群系中，并尝试从[世界生成](#generation)中移除旧的生物群系。

如果覆盖先前声明的生物群系，生物群系文件可能会无效地为空。如果生物群系定义，无论是初始定义还是覆盖，包含任何组件，则必须包含顶层`"format_version"`属性和`"identifier"`属性。生物群系的初始定义必须至少包含一个组件或标签；由于几乎每个生物群系方面的默认值可供回退，因此所需的声明很小。

## 生成

生物群系在世界中被选择放置的规则取决于三件事：

1. 生物群系注册自身的维度
2. 在特定区块中生成生物群系的潜力，相对于[世界加载时应用的所有行为包中](#regions)也注册到该区块的其他生物群系
3. 从世界种子派生的不可变随机噪声表面

> **区块**可能代表整个维度或其表面区域的一个子集。实际文档或模式中不存在区块的概念。此术语在此处用于表示一个专用区域，生物群系可以从池中选择或在此处独立连接一组生物群系以实现单一目的。

_生物群系布局不是每个世界随机化的，只是每个种子随机化的。_这意味着，如果两个新世界应用了相同的附加包并包含相同的自定义生物群系定义，并且种子相同，这两个世界的每个维度将包含完全相同的生物群系布局。这对于香草生成来说是显而易见的，因为相同的种子总是在相同的位置生成相同的香草生物群系。

Minecraft目前无法创建新的维度。末地不允许添加新的生物群系或移除默认生物群系，仅保留主世界和下界的自定义。

> Mojang提供的文档中提到`"minecraft:legacy_world_generation_rules"`组件影响遗留的有限世界，但未提供此组件的模式，也没有香草生物群系定义使用它，因此其目的和行为未知。

### 主世界

```json title=""
"minecraft:overworld_generation_rules": {
	"generate_for_climates": [
		["cold", 1]
	],

	"hills_transformation": "pumpkin_pastures_hills",
	"shore_transformation": "pumpkin_pastures"
}
```

主世界使用[**气候**](#climates)、[**区域**](#regions)和[**层级**](#hierarchy)的概念来确定如何放置生物群系。

生物群系主要通过`"minecraft:overworld_generation_rules"`组件与主世界生成交互。在这里，它们可以注册自身作为基础生物群系并声明其子生物群系。不幸的是，标签系统也在[区域](#regions)的槽位中起作用。

气候和区域形成主世界中槽位的独立、不可配置的地图。具有指定气候槽和区域槽的生物群系只能生成在这些槽地图的相关交集中，具体取决于种子。换句话说，生物群系只能生成在匹配的气候和区域类型的主世界区域中，气候和区域绑定限制了生物群系可能生成的表面积。生物群系可以直接作为基础生物群系插入这些交集中，而子生物群系可以在其边界内声明以进行更精细的地形细节处理。

生物群系通过[权重](#climates)在可用区域的槽交集中竞争。生物群系实例实际上不是基于种子预先确定的；相反，相关槽中可用空间被权重所划分。因此，向槽交集中添加生物群系将导致生物群系**变小**而不是**更加稀有**；反之亦然。由于气候和温度图的大小不可配置，调整生物群系权重是修改生物群系大小的唯一方法。

#### 气候

```json title=""
"generate_for_climates": [
	["frozen", 2],
	["cold", 1]
]
```

生物群系必须与温度类别对齐才能作为基础生物群系生成。要将生物群系提升为将在主世界中生成的基础生物群系，生物群系的定义必须在`"minecraft:overworld_generation_rules"`组件中具有`"generate_for_climates"`数组属性。此数组包含形式为`[*气候类型*, *权重*]`的数组值，其中`*气候类型*`是五种气候字符串之一，`*权重*`是反映生物群系生成机会的整数值。生物群系按每个声明的气候类别中的权重生成[子生物群系](#hierarchy)。

> 这里的气候温度与`"minecraft:climate"`组件中的[浮点属性`"temperature"`](#temperature)不同，后者用于样式而非放置。然而，传统上它们在游戏玩法上是相关的。

> 如果为权重提供了浮点值，则该值将被截断，向下舍入到最近的较小整数。如果权重设置为负值，它将表现得像设置为`0`。

5种气候，按温度递增顺序：

| 气候      | 属性值          |
|:---------|:----------------|
| 寒冷      | `"frozen"`      |
| 冷凉      | `"cold"`        |
| 中等      | `"medium"`      |
| 微温暖    | `"lukewarm"`    |
| 温暖      | `"warm"`        |

> 微温暖气候仅可用于[海洋](#basic-oceans)和[深海](#deep-oceans)。陆地仅使用其他4种气候类型。

生物群系权重作为槽交集中共享分母的分子。例如：

一个虚构的生物群系X的权重为5。此目标槽中所有放置的生物群系，包括生物群系X，其总权重为20。因此，生物群系X将在20中占5，或25%的生成机会。

香草生物群系通常可以通过**减少权重**来移除：在所有适用气候中将其`"generate_for_climates"`属性的权重设置为`0`。然而，Minecraft实际上有一个[积极的回退系统](#regions)，以防止由于减少权重导致的生成失败，因此这种策略可能不足以移除生物群系。可能需要[去槽](#regions)或添加自定义生物群系以移除生物群系的生成。

> 如果所有气候的生物群系权重都设置为不生成，Minecraft将使用其他气候中符合条件的生物群系填充该气候的指定空间。回退系统甚至可以在槽交集中使用完全减少权重或[去槽](#regions)的生物群系，通常优先考虑气候槽而不是[区域槽](#regions)。因此，建议至少在[常见陆地](#common-land)和[海洋](#oceans)中为每个气候生成至少一个生物群系。由于其规模，[稀有陆地](#rare-land)可以忽略：香草生成在冷冻气候中甚至没有稀有陆地。

Minecraft仅允许玩家首次加载时出现在少数几个生物群系中：

- 草原
- 森林
- 针叶林
- 黑森林
- 稀树草原
- 叢林

这些生物群系的变体，如碎片稀树草原和花卉森林，也允许玩家加载。如果由于减少权重（以及对于草原和森林生物群系，额外在[深海的子生物群系](#islands)中未列出）没有这些生物群系，玩家通常无法加载到世界中：游戏通常会不断搜索有效的出生点。

> 在一些罕见的、难以解释的情况下，玩家在尝试找到有效的加载点足够长的时间后，将被抛入一个不用于玩家加载的生物群系中的世界起点。

与[区域槽](#regions)不同，生物群系可以注册到多个气候中。例如，可以将一个生物群系分布到不同的气候中，如果这在主题上是合适的。例如草原生物群系分布在3种气候中：

```json title="biomes/plains.json"
"generate_for_climates": [
	["cold", 1],
	["medium", 3],
	["warm", 1]
]
```

如果同一个生物群系在两个相邻的气候中生成，这些独立的生物群系实例彼此相邻，生物群系似乎会合并为一个，没有气候区域边界的迹象。

#### 区域

主世界由许多区域组成，这些区域作为生物群系放置的槽使用。显然被陆地和海洋分割，专用槽的关系复杂。

> 生物群系的性质（其美学和游戏玩法）不必符合其放置区域的意图。这里使用的“陆地”和“海洋”区域名称因此略显误导：放置在[陆地区域](#land)中的生物群系可以是水生的，放置在[海洋](#oceans)中的生物群系可以代表陆地。这些名称仅在参考香草生成时使用。

[如前所述](#climates)，生物群系直接使用`"minecraft:overworld_generation_rules"`组件中的`"generate_for_climates"`属性放置到主世界中，但此处给出的值仅影响气候槽图。配置生物群系生成于特定区域是不直观的，甚至Mojang未对此进行文档说明。主世界依赖[特定标签](#overworld-generation-aspects)将生物群系插入区域图。

在某些情况下，生物群系可以从其区域中**去槽**，强制将其生成作为更高优先级槽的一部分。此更改不可被后续列出的行为包逆转，因为它依赖于[生物群系定义继承模型](#inheritance)。Minecraft使用了一个积极的回退系统，尝试在没有生物群系注册到槽交集时防止生成失败。由于回退系统的积极性，在某些情况下，去槽是移除不需要的生物群系的唯一方法；[减少权重](#climates)可能不足够。

##### 陆地

与现实世界不同，陆地在主世界中占据了大部分。由于与海洋的交互和限制，陆地技术上包含了几个奇怪的子槽。如上所述，陆地生物群系不必代表陆地：这仅是槽的指定；它们可以是水生的或包含海洋子生物群系。

香草生成中共有56个陆地生物群系，其中许多是基础生物群系的变异或丘陵形式。

###### 常见陆地

```json title=""
"generate_for_climates": [
	["cold", 1]
]
```

常见陆地是游戏中最大的槽，占据了绝大部分陆地。Minecraft中的大多数生物群系都被插入到此处，如沙漠、黑森林、草原和沼泽。**默认情况下，所有自定义生物群系都被插入到常见陆地，除非另有标记。**

```
	当所有常见陆地生物群系通过将其气候权重设置为`0`指示不生成时，Minecraft使用[稀有陆地](#rare-land)槽中的生物群系填充该槽，首先是侵蚀的坏境和巨型树针叶林。如果这些生物群系随后被去槽且也设置为不生成，游戏将按以下生物群系回退列表生成：
	
- 叢林变体
- 剩余的巨型树针叶林变体
- 苔藓田
- 白桦森林变体
- 剩余的坏境变体
- 沙漠变体
- 自定义生物群系及其变体
- 森林变体
- 海洋变体

	回退生物群系将生成整个陆地区域。为此列表选择的变体甚至通常在未修改的生成中作为子生物群系运作。
```

###### 稀有陆地

```json title=""
"minecraft:overworld_generation_rules": {
	"generate_for_climates": [
		["medium", 1]
	]

	…
},

"rare": {}
```

稀有陆地区域是主世界中一些较大但非常罕见的区域，专门用于生物群系的放置。生物群系在此处被插入时应用了`"rare"`标签。香草生成中稀有生物群系的例子包括在中等气候中的叢林、在温暖气候中的石柱地貌和在冷凉气候中的巨型树针叶林。香草生成中在寒冷气候中不存在稀有陆地，但可以通过自定义添加：

```json title=""
"minecraft:overworld_generation_rules": {
	"generate_for_climates": [
		["frozen", 1]
	]
},

"rare": {}
```

> 可以通过在声明中应用`"ocean"`标签来去槽稀有陆地生物群系。这是因为`"ocean"`标签优先于`"rare"`标签。如果由于去槽，某一气候中没有可用的稀有陆地生物群系，游戏将回退到兼容的常见陆地生物群系。这种情况自然发生在寒冷和微温暖气候中，因为这些气候中没有香草稀有陆地。如果一个稀有陆地生物群系只是针对特定气候减少了权重，它仍然可能在这些气候中生成，如果没有其他生物群系可用。

##### 海洋

覆盖在主世界其余部分的是海洋。海洋这个词有些误导，因为它们并没有完全贯通整个世界；在Minecraft中，陆地区域的行为方式使玩家有更多的活动空间，导致海洋更像是海域或湖泊。通过使用 `"ocean"` 标签，生物群系被分配到海洋区域。

海洋通常被普通深度和深海深度大致平均地分割。分散的岛屿可以在海洋区域内生成。默认情况下，总共有十种海洋生物群系：每种温度和两种深度组合各一种。海洋生物群系不必实际生成水生生物群系；它们也可以是陆地。此外，海洋可以包含陆地子生物群系。例如，平原、森林和海滩并非海洋的专属，而可以作为海洋岛屿的一部分生成，岛屿本身位于海洋区域内。

> 海洋权重的行为与其他分布不同。看似，海洋并不打算争夺空间：原版生物群系在每种深度-气候组合中仅有一个海洋生物群系。类似权重的竞争海洋在很小的规模上被分离：每个实例大约跨越几个区块。权重差异较大可以更清晰地分离竞争生物群系，但权重较小的生物群系仍然只能在非常小的群落中生成。通常，使用 [地表调整](#surface-adjustments) 或 [地物](#features) 来改变海洋会更明智。

> 如果所有海洋通过 [降权](#climates) 被设置为不生成，游戏将回退到冻结海洋和深冻结海洋。因此，添加自定义生物群系可能是移除所有原版海洋生物群系的唯一方法。

###### 基本海洋

```json title=""
"minecraft:overworld_generation_rules": {
	"generate_for_climates": [
		["lukewarm", 1]
	]
},

"ocean": {}
```

基本海洋约占海洋区域的一半。该区域旨在由相对浅水深度的水生生物群系使用。

> [尽管深海海洋分配](#deep-oceans)发生较深，原版的基本海洋生物群系无法使用 `deep` 标签进行降槽。除非通过 [降权](#climates)，否则它将继续生成。

###### 深海

```json title=""
"minecraft:overworld_generation_rules": {
	"generate_for_climates": [
		["frozen", 1]
	]
},

"ocean": {},
"deep": {}
```

分配到深海区域的生物群系除了使用 `ocean` 标签，还使用 `deep` 标签。深海海洋占据海洋中剩余的大部分空间。此分配通常用于比其他海洋更深的海洋，通常从地表到基岩的中间。

> 单独的 `"deep"` 标签对生成或生成无影响；它必须与 `"ocean"` 一起使用。

###### 岛屿

```json title="biomes/ocean.json"
"minecraft:overworld_generation_rules": {
	"hills_transformation": "tropical_island"
},
```

从概念上讲，岛屿与陆地区域中的子生物群系没有区别。原版中生成的岛屿实际上只是海洋中的“丘陵”！

> 尽管这些岛屿技术上并不形成槽，而是子生物群系，但由于是一个错误或疏忽，它们被作为槽来标记，因为它们必须被声明。岛屿从未为自定义海洋生物群系声明，只能按海洋深度单独分组。岛屿使用 `hills_transformation` 或 `mutate_transformation` 属性在 `minecraft:overworld_generation_rules` 组件中声明 _仅_ 在 `ocean` 和 `deep_ocean` 生物群系的覆盖定义中（即使这些原版海洋已被 [降权](#climates)）。如果需要稀有性，岛屿也可以声明为 [变异丘陵](#mutated-hills)。原版岛屿仅使用丘陵子生物群系生成，并且仅在深海中生成；因此，可以通过将 Deep Oceans 覆盖中的 `hills_transformation` 指向 Deep Ocean 生物群系本身来完全禁用原版岛屿：

<CodeHeader>biomes/deep_ocean.json</CodeHeader>

```json title=""
"minecraft:overworld_generation_rules": {
	"hills_transformation": "deep_ocean"
},
```

由于 [生成陆地时海岸线的优先级](#shores)，海洋中的岛屿可能完全作为海岸线形成，除非禁用这些海岸线。岛屿也可能有自己的河流子生物群系；原版岛屿和所有自定义生物群系默认使用河流。

##### 蘑菇森林

极少情况下，蘑菇森林会作为其自身的槽在海洋区域内生成。蘑菇森林生物群系本身可以通过向生物群系添加 `"ocean"` 标签进行降槽以禁用。然而，蘑菇森林海岸生物群系无法通过任何方式 [禁用](#exceptions)，并且当主要生物群系被降槽时，它将完全覆盖槽；这是主世界中唯一其放置不可变的生物群系。尝试将蘑菇森林海岸生物群系降槽到海洋似乎起初有效，但该生物群系仍会在蘑菇森林槽中同时继续生成。

> 如果不希望在世界中出现蘑菇森林，唯一的做法是更改其风格——最方便的是使其与周围的海洋相匹配。

###### 层级

```json title=""
"minecraft:overworld_generation_rules": {
	…
	"hills_transformation": [
		["overgrown_forest_hills_short", 4],
		["overgrown_forest_hills_tall", 1]
	],
	"shore_transformation": "rocky_shore"
}
```

主世界生物群系可能由世界生成器直接或间接放置。直接放置的生物群系在此称为 **基础生物群系**，通过基础生物群系间接放置的生物群系称为 **子生物群系**。

如果在 `"generate_for_climates"` 属性中声明了目标气候温度，生物群系将作为基础生物群系。直接放置的生物群系通常较大。

所有基础生物群系的子生物群系将存在于基础生物群系的边界内，并位于其相关槽的交集内。因此，这些子生物群系是间接放置的，不是自己在主世界中声明生成，而是依赖于基础生物群系的生成。

> 生物群系可以无限制地被引用：它们可以同时作为基础生物群系出现，并作为多个其他生物群系的子生物群系。

子生物群系 _绝不_ 继承其引用生物群系的任何方面。如果子生物群系应以类似于其引用生物群系的方式出现或表现，则必须重新声明相关组件以实现。

##### 权重

```json title=""
"mutate_transformation": [
	["crater", 2],
	["lava_pit", 1]
]
```

每种转换类型可以声明多个子生物群系。它们在基础生物群系中声明时可以赋予整数权重值，以改变它们的出现频率。例如，丘陵子生物群系实际上只是基础生物群系的小型、常见子区域，因此可以用来形成许多不同的场景。单个基础生物群系可以有，例如，丘陵和湖泊两种 “丘陵” 子生物群系。

> 当权重使用浮点值时会截断。因此，权重为 `0.5` 的行为将等同于权重为 `0`，不会生成。

基础生物群系可以从其自身的有权重的子生物群系声明中被引用。[类似于基础生物群系权重](#overworld)，这会减少实际子生物群系可用的空间，使它们在表面积上更小，而不是通过计数使它们更稀有。对于使用丘陵子生物群系的丘陵基础生物群系，可以用这种方式生成小而罕见的山峰。对于使用河流子生物群系的干燥、温暖基础生物群系，河流可以零星地出现干涸，而无需依赖丘陵或变异子生物群系。

##### 覆盖

当覆盖之前的生物群系定义时，设置为特定子生物群系类型的值 —— 无论是直接的生物群系引用还是加权引用数组 —— 将完全替换该类型的任何先前定义。这意味着，如果在早期定义和新的覆盖中都为某类型提供了多个子生物群系，则旧的子生物群系将被新的完全覆盖，而不是添加到它们。

例如，如果早期的定义声明了：

```json title=""
"hills_transformation": [
	["rolling_hills", 2],
	["spiky_hills", 1]
]
```

而新的定义声明了：

```json title=""
"hills_transformation": [
	["tall_hills", 1],
	["short_hills", 1]
]
```

只有 `"tall_hills"` 和 `"short_hills"` 子生物群系会作为丘陵转换生成。之前的列表将被 _完全_ 忽略。如果要将两组子生物群系一起使用，必须在新的定义中重新声明之前的子生物群系：

```json title=""
"hills_transformation": [
	["rolling_hills", 2],
	["spiky_hills", 1],
	["tall_hills", 1],
	["short_hills", 1]
]
```

##### 子生物群系类型

基础生物群系可以声明以下类别的子生物群系：

| 转换类型 | 属性值                |
|:--------|:----------------------|
| 丘陵    | `"hills_transformation"`  |
| 变异    | `"mutate_transformation"` |
| 河流    | `"river_transformation"`  |
| 海岸    | `"shore_transformation"`  |

[丘陵](#hills)和[变异](#mutations)是固定的、分散的、有界的区域，可能有自己的子生物群系，包括[变异丘陵](#mutated-hills)。[河流](#rivers)形成细长的、不可更改的河段，分布在整个世界中。[海岸](#shores)的位置则间接受其他生物群系的影响；它们形成陆地与海洋之间的分界。

嵌套子生物群系没有任何效果。丘陵不能再拥有丘陵。所有子生物群系类型亦是如此。丘陵、变异和变异丘陵都可以声明自己的河流和海岸子生物群系，从而在子生物群系级别进行精细调整。河流和海岸不会生成任何子生物群系。

###### 丘陵

```json title=""
"hills_transformation": "pumpkin_pastures_hills"
```

丘陵子生物群系是生物群系的小型、常见子集，通常用于高度变化。尽管名称为丘陵，但它们不必用于生成丘陵地形。它们在基础生物群系中的生成机会足够常见，可以可靠地用于形成大型、自然的生成，如湖泊、陨石坑等。丘陵子生物群系在原版深海生物群系中用于生成岛屿。丘陵没有默认值；未声明丘陵子生物群系时，生成不会发生任何变化。

###### 变异

```json title=""
"mutate_transformation": "mushroom_forest_dense"
```

变异子生物群系是基础生物群系的大型、稀有子集，通常用于奇特的变种。一个原版示例是向日葵平原；另一个是冰刺地形。与其他依赖生成的生物群系类别不同，变异子生物群系不会可靠地生成。它们不应被期望在基础生物群系实例中生成。像丘陵子生物群系一样，如果未声明变异子生物群系，则不会发生任何转换。

###### 变异丘陵

```json title="biomes/mangrove_forest.json"
"hills_transformation": "mangrove_forest_hills"
```

```json title="biomes/mangrove_forest_hills.json"
"mutate_transformation": "mangrove_forest_hills_mutated"
```

丘陵子生物群系可以声明自己的变异子生物群系，从而有效地创建一个变异丘陵子生物群系。这种极为罕见的子生物群系生成允许与丘陵或变异子生物群系相同的所有交互，包括拥有自己的河流和海岸。

> 如果在变异子生物群系中声明了 _丘陵_ 子生物群系，则变异丘陵 **不会** 生成。

###### 河流

```json title=""
"river_transformation": "riverbed_dry"
```

河流存在于固定于世界种子的专用空间中，并且无法通过行为包更改。虽然技术上河流形状在主世界中无处不在，但它们仅在与陆地生物群系相交时生成。相交的陆地生物群系声明可以指定一个河流子生物群系应用于河流生成分配的河段。虽然河流的宽度不可配置，但通过较低的 [高度图](#heightmap) 配置，河流可能会显得更宽。

默认情况下，如果 `"river_transformation"` 属性未在 `"minecraft:overworld_generation_rules"` 组件中声明，或如果此组件根本未声明，Minecraft 将使用河流生物群系。要有效移除生物群系中的河流，可以通过其标识符将 `"river_transformation"` 属性指向声明生物群系本身：

```json title="biomes/ivory_shallows.json"
{
	"format_version": "1.13.0",

	"minecraft:biome": {
		"description": {
			"identifier": "ivory_shallows"
		},

		"components": {
			…
			"minecraft:overworld_generation_rules": {
				…
				"river_transformation": "ivory_shallows"
			}
		}
	}
}
```

这将保留生物群系的地表构建器及其指定的方块、高度图、气候等，沿河流路线平滑生成声明生物群系，不会被中断。在具有 `ocean` 标签的生物群系中声明的河流对世界生成没有影响；当生物群系被用作河流时，添加到生物群系的 [槽分配标签](#overworld-generation-aspects) 将被忽略。

当 `"river_transformation"` 属性中给定多个河流时，河流生成将在列出的生物群系之间快速过渡。在权重相等的情况下，河流每6–8个区块过渡一次。权重差异较大或河流子生物群系数量更多时，河流可能只在几个区块内生成，然后过渡到另一个河流生物群系。生成多个河流子生物群系时要小心：通常每个基础生物群系只使用一个河流子生物群系。

###### 海岸

```json title=""
"shore_transformation": "cliffs_steep"
```

海岸是指定在陆地生物群系和海洋生物群系之间生成的特殊地段：即不带 `ocean` 标签和带 `ocean` 标签的生物群系。由于这些位置在自定义生物群系定义下有所不同，海岸是唯一其位置可以被影响的子生物群系。这不仅限于主世界的主要陆地和海洋区域，还可以用于冲突子生物群系之间的过渡。这类变化可以用于生成带有海岸的大片浅水湖，甚至在[看似](#oceans)两个陆地生物群系之间生成过渡生物群系。

像河流一样，海岸作为陆地生物群系的一部分声明，这次使用 `"shore_transformation"`。在陆地和海洋生物群系之间生成的海岸 _始终_ 从陆地生物群系中选择；向海洋添加海岸对生成没有影响。[槽分配标签](#overworld-generation-aspects)的添加对海岸没有影响。海岸默认生成海滩，可以通过引用声明生物群系本身来有效移除：

```json title="biomes/lava_fields.json"
{
	"format_version": "1.13.0",

	"minecraft:biome": {
		"description": {
			"identifier": "lava_fields"
		},

		"components": {
			…
			"minecraft:overworld_generation_rules": {
				…
				"shore_transformation": "lava_fields"
			}
		}
	}
}
```

如果移除，基础生物群系将在略陡的角度过渡到海洋，忽略沙滩海岸，使用基础生物群系的 [地表构建器](#surface-builders) 所使用的方块。

当空间较小时，海岸总是优先于其引用的生物群系。如果为陆地生物群系指定的主世界表面区域足够小，生成的结果可能只是海岸，看不到引用生物群系的任何痕迹。这在原版海洋岛屿中经常发生。

当多个海岸作为子生物群系给出时，生成可以在它们之间快速过渡。在最简单的情况下 —— 两个权重相等的海岸 —— 游戏将在每十几个到二十几个区块之间切换生物群系。随着海岸数量的增加或海岸权重差异的增大，子生物群系可能变得过小而无法使用。通常，一个基础生物群系只需要一个海岸。但也有一些例外，例如如果一个海岸有简单的沙子，另一个海岸装饰有岩石或巨石。

##### 例外情况

蘑菇森林生物群系无法拥有河流或海岸子生物群系。[其沿海岸生成的海岸线无法移除](#mushroom-fields)；划分蘑菇森林为海洋的子生物群系将始终是蘑菇森林海岸。蘑菇森林允许的变异可以拥有自己的河流和海岸子生物群系，但不推荐这样做，因为在如此小的空间内生物群系混合可能会变得混乱。如果蘑菇森林生物群系 [被降槽](#mushroom-fields)，蘑菇森林海岸将在蘑菇森林槽中作为基础生物群系，并可能拥有自己的子生物群系。

### 下界

```json title=""
"minecraft:nether_generation_rules": {
	"target_temperature": 0.5,
	"target_humidity": 0.75,
	"target_altitude": -0.25,
	"target_weirdness": 0,
	"weight": 0.1
}
```

下界的生成比主世界更纯粹，并且允许更大的控制，但这也大大增加了复杂性。[任意系统](#strategies-considerations)应建立在 [强大的数学系统](#principles)之上，以使下界布局系统正常工作。

#### 原则

与主世界通过随机机会定义固定重叠槽图来放置生物群系不同，下界使用四维“多噪声”生物群系布局系统，生物群系总是直接放置；在这个维度中不存在子生物群系。

> 如 [方面与目标](#aspects-targets) 所述，如果两个生物群系都配置为这样，生物群系可以完全封装在另一个生物群系内（类似于 [子生物群系](#sub-biome-types)）。

> 尽管看似如此，下界生物群系的生成仅依赖于 _x_ 和 _z_ 坐标，所有这些坐标的 _y_ 值都属于同一个生物群系；目前无法在下界垂直相邻地放置生物群系。

##### 方面

在下界的多噪声系统中，基于世界种子，使用 [柏林噪声](https://zh.wikipedia.org/wiki/柏林噪声)曲线为每个 _x_-_z_ 位置分配四个独立值，这些值位于闭区间 [-1, 1]。如果下界声明的生物群系在所有应用的行为包中保持不变，这些值在相同种子的世界中保持不变 —— 否则，不同世界会有所不同。为方便起见，这些独立值将在此描述为 **方面**；文档中未使用此术语。这四个方面被赋予任意名称以在行为包中使用，并通过以下属性由生物群系定义“目标”：

| 方面        | 目标属性               |
|:------------|:-----------------------|
| 温度        | `"target_temperature"` |
| 湿度        | `"target_humidity"`    |
| 高度        | `"target_altitude"`    |
| 奇异性      | `"target_weirdness"`   |

> 这些名称与生物群系的属性无关，即设置更大的 `target_temperature` 不会导致该生物群系的气候变暖。这些名称只是用来引用独立方面的一种方式。[名称可以根据需要被忽略或重新解释。](#separation-of-concerns)

###### 方面属性

由柏林噪声生成的值存在于区间 `[-1, 1]` 上，但极值之间的分布并不均匀。柏林噪声在此区间上的分布类似于标准差约为0.4的钟形曲线，得出以下明显结论：

-   越接近 `0` 的值生成的概率越高；越接近极值，生成概率会 _大大_ 降低。
-   分布在 `0` 周围基本对称，呈现出两条均衡的“稀有路径”。

由于柏林噪声是一个插值过程，每个方面将被平滑生成。这意味着基于下界的 _x_ 和 _z_ 坐标生成的噪声曲线符合 [中值定理](https://zh.wikipedia.org/wiki/中间值定理)：该维度的值必须在局部最大值和最小值之间平滑过渡。

> 当前，作为柏林噪声生成器输入的坐标映射方式无法更改。这意味着下界水平面（_x_ 和 _z_ 坐标）上局部极值之间的距离是固定的；因此，无法方便地设置所有生物群系为更大或更小。然而，生物群系数量较少时，它们可能会显得足够大，反之亦然。

以仅生成5种原版下界生物群系的场景为例。[忽略单个方面](#ignoring-aspects) —— 温度，所有其他方面目标将设置为 `0`。原版生物群系与温度的映射如下：

| 生物群系            | 温度   |
|:-------------------|-------:|
| 地狱沙谷            |     `-1` |
| 扭曲森林            |   `-0.5` |
| 下界荒地            |      `0` |
| 猩红森林            |   `0.5` |
| 玄武岩三角洲        |      `1` |

这意味着地狱沙谷和玄武岩三角洲作为极端存在；它们将被孤立且不常见，并形成简单、通常是凸形的形状。在中间，下界荒地将经常以松散、波浪状的形式蜿蜒延伸。两个森林将形成位于平均值和极端值之间的大环。因此，由于插值，玩家必须依次通过扭曲森林、下界荒地和猩红森林生物群系才能从地狱沙谷到达玄武岩三角洲。

不幸的是，实际上生成要难以理解得多。由于有四个维度、目标匹配的可配置性以及几乎无限制的生物群系数量，创建一个引人入胜的下界布局可能更具挑战性。然而，通过 [理解目标](#targeting) 和 [约束与隔离目标值并微调权重](#strategies)，可以在最小的试验和错误中实现有趣的布局。

##### 定向

在下界的某个点为每个方面设置了特定的值后，Minecraft 使用生物群系定义来确定将选择哪个生物群系进行生成。与主世界不同，相同的生物群系将在相同的目标值下始终生成；这里不存在隐藏的随机性。这是因为游戏使用一个公式来确定哪个生物群系的方面目标最接近给定位置的值。声明的目标在游戏会话中永不更改，因此对于那些值，那个生物群系将始终被选中。

> 用于确定与一组值最匹配的生物群系的确切公式尚不清楚。可以预期它要么是绝对值差异的简单总和，要么是4维距离公式。

因此，可以理解为每个下界生物群系共享由有效方面值的交叉形成的4维空间的一部分。这些分界线源自“相邻”且因此竞争的生物群系的方面目标。

为了简化起见，假设只考虑一个方面（方面1），想象试图分配3个生物群系：生物群系A、生物群系B和生物群系C。由于定向寻找最接近的匹配，基于目标值会形成成功区间，这最终决定了生物群系生成的位置。

举一个具体的例子，假设目标值在范围的最极端：

| 生物群系 | 方面1目标 | 成功区间       |
|:--------|---------:|---------------:|
| 生物群系A |      `-1` |    [-1, -0.5] |
| 生物群系B |       `0` |   [-0.5, 0.5] |
| 生物群系C |       `1` |       [0.5, 1] |

在这种情况下，尽管目标值在范围内均匀分布，但由这些值派生的区间大小并不相同。这是因为目标值被推到了范围的极限，中间点位于-0.5和0.5；这两个值最终划分了结果区间。在这种情况下，下界中生物群系B将非常普遍，而生物群系A和C将明显较少见。

尝试通过反向方法均匀分配区间会发现，完整的噪声范围可以通过[-1, -1/3]、[-1/3, 1/3]、[1/3, 1]均分为三部分。然后目标值必须围绕这些分界点均匀分布，结果如下：

| 生物群系 | 目标值    | 成功区间          |
|:--------|---------:|-----------------:|
| 生物群系A |  `-0.667` |   [-1, -0.333] |
| 生物群系B |       `0` |  [-0.333, 0.333] |
| 生物群系C |   `0.667` |       [0.333, 1] |

空间（在这种情况下只是线段上的区间）现在被均匀划分，显示了目标之间空间边界的形成方式。

> _然而，即使区间均匀分布，[噪声分布](#aspect-properties)仍将确保生物群系不会均匀占据下界的1/3！_ 此处生物群系B仍将是最常见的，但生物群系B和C的出现频率将高于第一个示例。要真正均匀分配生物群系，使每个生物群系大约有三分之一的生成概率，必须同时考虑成功区间和噪声分布。在此示例中，[-1, -0.25]、[-0.25, 0.25]和[0.25, 1]的区间将大致均匀地分布三个生物群系在下界中。

###### 定向调整

生物群系还可以在 `"minecraft:nether_generation_rules"` 组件中声明第五个属性 `"weight"` 以影响生物群系匹配，这可以要求方面值更紧密地与生物群系的方面目标对齐，以便生成该生物群系。权重设计为在区间 [0, 1] 内运作，其中0使匹配行为正常，1将要求精确匹配才能生成生物群系。

```
因为精确匹配极为罕见，并且在地图上只占据一个极小的空间，值 `1` 将有效地禁用生物群系的生成，除非所有其他生物群系也具有极端权重。使用超出预定区间的值将导致更极端的情况，只有一组极端权重的生物群系中的一个能够生成。

因此，除非希望移除先前声明的生物群系，否则不建议将此属性设置在其预定范围之外。在这种情况下，值 `1` 应该足够；这种策略类似于[降低主世界生物群系的权重](#climates)。

在所有下界注册的生物群系都被以相同 `"weight"` 替换的极端情况下，Minecraft 将按照以下可用性顺序退回到整个下界的单一生物群系：

- 下界废土
- 灵魂沙谷
- 猩红森林
- 扭曲森林
- 玄武岩三角洲
- 自定义生物群系
```

因此，权重调整只能减少生物群系的规模。这些调整在使用生物群系在两个其他生物群系之间过渡时非常有用。虽然通过调整其方面目标可以使某个生物群系变小，但由于它们相互影响生成，这可能会引发持续需要修订其他生物群系目标的连锁反应。使用 `"weight"` 是一个简单、单一的操作。

> 不过，持续使用权重调整会使系统更加复杂，因为在每个使用该属性的地方都必须考虑一个额外的属性。因此，权重调整应谨慎使用。一般规则是不在“连续”生物群系中使用：那些目标更多或更少相同方面值的生物群系；将 `"weight"` 属性留给一侧或另一侧。

如果多个下界生物群系具有完全相同的方面目标，则只有一个会生成。如果给定了带有 `"weight"` 属性的定向调整，最接近 `0` 的 `"weight"` 的生物群系将被选中，其他生物群系将永不生成。如果多个生物群系与 `0` 的距离相同，则使用固定顺序来确定将始终为这些目标生成的单一生物群系。

> 用于在相同目标和有效权重下优先选择生成生物群系的系统尚不清楚。所选生物群系不会随着世界或种子实例的变化而改变，因此可能基于文件名或生物群系标识符，或可能还考虑行为包的顺序。

#### 策略与考虑事项

在一个模糊的数学系统中，很难决定如何布局下界。当进一步重新解释方面时，没有设定的方向，这可能导致无休止的属性重新调整循环。因此，开始之前建立策略至关重要。

> 由于下界使用的意义是任意的，任何自定义系统仅在所有下界声明的生物群系定义“意见一致”时才有效。当其他行为包中的生物群系定义遵循其自身议程时，这种系统会失败。在解释时必须保守，因为下界更改的行为包可能会互相竞争。

> [与主世界首次加载时不同](#climates)，自定义生物群系无需考虑玩家通过传送门加载下界时的情况；玩家在首次通过下界传送门旅行时可以进入任何下界注册的生物群系。

##### 职责分离

由于各方面完全独立且其名称无意义，可以将方面重新解释为任何独立属性系统。在更阴暗的下界中，这些方面可能类似于：

| 实际定向属性       | 重新解释            |
|:-------------------|:--------------------|
| `"target_temperature"` | 腐败                |
| `"target_humidity"`    | 生死比例            |
| `"target_altitude"`    | 灵魂亲和力          |
| `"target_weirdness"`   | 恶意性              |

在将下界重新解释为主世界底部的扩展时，方面可以是：

| 实际定向属性       | 重新解释            |
|:-------------------|:--------------------|
| `"target_temperature"` | 温度（不变）         |
| `"target_humidity"`    | 黑暗                |
| `"target_altitude"`    | 富裕                |
| `"target_weirdness"`   | 危险性              |

只要任意意义总是与属性名称匹配，任何自定义系统都可以使用。只有在建立方面的含义后，才能开始实际分配方面目标。

###### 忽略方面

为了生成时可以有效地忽略方面，通过将所有生物群系定义中某个方面的目标设置为相同的值，例如 `0`，该方面将在确定生物群系布局时不发挥作用。这对于以下几种用例是合适的：

- 不需要使用四个独立参数来实现一个效果。
- 只需考虑少数几个生物群系。
- 希望[简单、可靠的生物群系过渡](#containment-transitions)。

如果任何这些条件成立，应该忽略一些方面以简化开发。原版生成本身忽略了4个方面中的2个：高度和奇异性。

###### 任意方面类型

确保所有生物群系能够生成可能具有挑战性，[由于在多噪声布局系统下生物群系生成的唯一性要求](#targeting-adjustment)。可以任意调整每个方面的值，但更清晰、更容易的方法是对每个方面施加唯一性期望，创建非唯一和唯一方面。

非唯一方面的值不保证能帮助唯一定位生物群系。一个用例是[分层方面](#tiering)。而唯一方面则用于在下界中查找一个生物群系生成的独特条件集。

使用这种方法时，至少必须使用一个唯一方面。除了这个保证的唯一方面之外，其他方面可以是唯一的或非唯一的，但当只期望一个方面包含唯一值时，这个系统最具潜力。

##### 稀有度

建立下界生物群系稀有度的主要方法有两种：按方面稀有度和指定其中一个方面来表示稀有度。后一种方法使得完全控制生物群系权重成为可能，与[主世界的布局](#overworld)相似。

###### 按方面稀有度

按方面稀有度是指每个方面，无论其功能用途或任意解释，都是[独立分布的](#aspect-properties)。在定向方面值时，必须考虑这种分布。对于具有柏林噪声生成的2个对称稀有度分布，区间内可用空间的竞争通常不是问题；如果正值变得过于拥挤，可以将负值作为目标。分层计划可以进一步缓解受限空间带来的问题。

###### 独立稀有度方面（权重）

[使用唯一方面](#arbitrary-aspect-types)对于设置下界生物群系的权重特别有效，就像主世界生成那样。在这个系统中，一个方面，例如奇异性，被[重新指定](#separation-of-concerns)为表示权重。假设其他3个方面是非唯一的并用于表示生物群系的独立属性，这个权重可以用于根据该重新定义的方面的[柏林噪声分布](#aspect-properties)选择特定生物群系。

通常，其他方面的有意义选择不应需要权重方面的高度复杂性，但如果某个组合希望有大量可能性，则必须考虑值的唯一性和计算的目标区间。本质上，每个组合的其他方面的权重必须是唯一的[由于唯一性要求](#targeting)。考虑到这种唯一性，从这些目标派生的区间需要仔细分布以准确达到所需的权重。[定向调整](#targeting-adjustment)在这里很有用，但在添加新生物群系到集合时，可能需要调整所有针对相同组合的生物群系权重。

当由于仅有一个生物群系匹配条件时，不需要为非唯一方面的组合设置权重，应将目标值设置为 `0`。这为该生物群系生成提供了最大的空间，帮助避免不需要的生物群系干扰。

> 由于下界中不存在方面的遮罩，这种权重系统易受一些小故障的影响，[由方面目标空间的4维地图中的距离计算函数](#targeting)引起。对于下界中某点的一组值，如果权重目标与该点方面的实际值相差足够远，而其他3个方面已很好地定位，则差异可能导致系统选择不期望的生物群系。换句话说，使用权重方面并非严格或有保证。不过，系统选择的生物群系仍将定位良好并适合这些值，并且预期的生物群系可能在附近较小的区域内出现，因此该系统的故障是轻微的。

##### 分层

分层可用于将描述性、有条件的意义赋予可量化的值。分层进一步通过对方面的所有定向值施加一定的“模式”来帮助下界生物群系开发。

以主世界气候为例，可以将温度含义分配给数值，如下所示：

| 气候   | 温度       |
|:------|-----------:|
| 冰冻   |     `-0.6` |
| 寒冷   |    `-0.25` |
| 正常   |         `0` |
| 微温   |     `0.25` |
| 温暖   |      `0.6` |

在这个系统中，所有下界声明的生物群系中该方面的值都应使用这些值。这样的系统既能确保“寒冷”生物群系不会在“温暖”生物群系附近生成，又方便地允许[聚类](#clustering-avoidance)相似生物群系，而无需担心唯一性。随时，这个“模式”可以通过添加额外的含义来扩展，例如“炽热”定义，值为 `0.8`。

##### 过渡

如[方面属性](#aspect-properties)所述，当忽略所有其他方面时，过渡保证在单一方面上发生。这可能导致长过渡或“岸线”之间的生物群系，具体取决于区间大小和定向调整。当只考虑一个方面时，这种效果变得不太复杂，使用多个方面时几乎无法管理。

无论实现难度如何，参与的行为简单易懂。由于各方面独立且每个方面遵循中间值定理，过渡在下界表面上在每个方面上都是独立平滑的。当在下界生成中使用多个方面时，一个点与其附近的另一个点之间的过渡可能导致任何方面从一个变化到另一个方面。[由于下界中生物群系始终在相同条件下生成](#targeting)，每个方面引入到目标生物群系的条件都必须被考虑以发生过渡。

例如，如果一个生物群系有以下下界生成规则：

```json title=""
"minecraft:nether_generation_rules": {
	"target_temperature": 0.2,
	"target_humidity": -0.6,
	"target_altitude": 0.4,
	"target_weirdness": 0,
	"weight": 0
}
```

假设忽略了奇异性方面，则过渡生物群系必须在其他3个相关方面的每个组合的前后发生变化。因为单一的生物群系定义无法针对下界的多个点进行定位，必须创建8个不同的定义（每个相关方面组合的1个正值和1个负值），并进行良好的调整以充当过渡到该目标生物群系。此外，如果该生物群系中的任何方面目标发生变化，则所有过渡生物群系定义也必须更新以适应变化。

然而，有两种不同的情景可以在最小的努力或复杂性下使用过渡生物群系。

###### 角落过渡

当用于过渡的生物群系存在于所用方面的绝对极端时，可以发生角落过渡。举个例子，如果目标生物群系在每个使用方面上都以 +/-1 为目标值，则可以通过在这些方面上将值设置为例如 +/-0.8 作为“紧挨着”目标生物群系来创建过渡生物群系。

例如，如果目标生物群系具有以下目标值（其他2个方面被忽略）：

```json title=""
"target_temperature": 1,
"target_humidity": -1
```

则可以使用以下值建立过渡生物群系：

```json title=""
"target_temperature": 0.8,
"target_humidity": -0.8
```

###### 分层过渡

分层过渡可以在[分层系统](#tiering)中用于分隔原本强烈对立的层。与角落过渡不同，由于下界中生物群系选择的特性以及方面定向空间的分配，分层过渡可能存在失败。

如果分层方面具有以下模式：

| 生命力   | 值      |
|:---------|-------:|
| 不死     |  -0.8 |
| 雄健     |   0.8 |

过渡生物群系可以通过将一个新的过渡层，例如“虚空”，值为 `0` 来帮助这两者之间的变化不那么突兀。

如果该过渡层可以由多个生物群系表示，则专用于这些过渡生物群系的空间集可能足够大，使得这两者之间几乎总是会出现过渡。然而，如果仅应由一个生物群系作为过渡，则可能需要为其他使用的方面组合复制该生物群系，以保留足够的定向空间以便过渡频繁发生。

##### 布局

由于下界的多噪声系统中严格的边界并不存在，生物群系从未被绝对地排列；“分配”概念在下界中不存在。然而，只要考虑所有下界声明生物群系的所有定向值，生物群系在彼此之间仍然可以相对排列。

###### 聚类

生物群系聚类相当直接，且随着注册到下界的生物群系数量增加而变得更加明显。当一组相关的生物群系具有足够接近的方面目标时，就会发生生物群系聚类。为了将生物群系聚集在一起，只需为每个相关生物群系分配仅轻微偏移的目标值，确保每个生物群系都有其独特的值以避免冲突。

由于多噪声系统的特性，无法保证设计的聚类中的所有生物群系将在一次聚类实例中一起生成，但通常会生成多个生物群系。

对于目标值远离聚类中每个方面的平均值的生物群系，可能需要提供一些[定向调整](#targeting-adjustment)，以确保聚类中“最外层”的生物群系不会过度扩展到通常为聚类外的生物群系指定的空间。

###### 隔离

生物群系可以在某个方面的值的极端处被隔离。将生物群系的目标值设置为接近某个方面的极端值（`-1` 或 `1`）有助于确保该生物群系的稀有性。随着每个使用方面添加一个极端值，设置足够多的生物群系后，这些隔离的生物群系通常会变得更小，并因柏林噪声插值形成简单的离散形状。这些隔离的生物群系会随着每个被极端值目标化的方面的增加而变得越来越小和稀有。

###### 避免

柏林噪声方面范围的双重性质可用于驱使生物群系彼此远离。如果下界的生物群系数量较少，可以建立[过渡生物群系](#tiering-transitions)来分隔生物群系。对于较大的生物群系数量，通过将某个方面的目标值设置为相反的极端值（如 `-1` 和 `1`），可以使生物群系彼此避免。这将有效地[隔离](#isolation)这两个生物群系，并防止它们直接接触。

> 为相对生物群系设置多个方面的目标值的极端值对于实际的避免效果毫无意义。这只会进一步隔离每个生物群系，因为方面是独立的，从而限制了每个生物群系的生成条件。同时，这些生物群系实例之间的最小距离不会减少，而只会由于生物群系稀有性的复合而最小化“接近调用”的数量。

### 维度交互

用于分配的维度特定标签在跨维度时没有影响；例如，`"ocean"` 和 `"rare"` 标签在生成下界或末地的生物群系时没有影响。

生物群系可能在多个维度中生成；它们只需使用相关组件（目前仅主世界和下界）为每个所需位置注册自己。

## 形状与风格

生物群系的实际外观取决于其形状和美学。这些概念与生物群系的放置方式完全分离，这意味着单个美学可以在主世界的多个地方重复使用；例如，原版森林作为基础生物群系、平原的子生物群系或海洋中的岛屿独立存在。

生物群系的美学由构成该生物群系的方块和生物群系声明的[气候](#climate)特征控制。构成生物群系的方块主要使用[表面生成器](#surface-builders)声明，但符合条件的表面生成器也允许基于噪声的[调整](#surface-adjustments)。

生物群系的形状取决于其声明的表面生成器和生物群系的高度图设置。生物群系的形状会因每个区块而波动；这些波动在每个维度每个种子中是固定的，这意味着在某个维度的相同位置上，相同的形状设置下的生物群系只会因种子不同而有所变化。

### 方块类型

方块使用简单符号表示法或状态符号表示法声明。**简单符号表示法**将方块的标识符作为字符串引用，例如 `"minecraft:grass"`。如果未提供命名空间，游戏会尝试在所有声明的命名空间中查找具有该名称的注册方块。

> 强烈建议始终使用方块的完整名称，包括命名空间，以避免意外问题。

**状态符号表示法**指示选择方块的特定变体的方块状态。

> 不幸的是，原版方块的方块状态目前尚未覆盖每个方块的所有可能真实状态；例如，并非所有方向性可放置的方块都有其方向的状态，如墙壁。

状态符号表示法是具有 `"name"` 字符串属性（引用方块标识符，如基本符号表示法）和 `"states"` 对象属性（提供状态声明）的对象。状态声明的一个示例如下：

```json title=""
{
	"name": "minecraft:concrete",

	"states": {
		"color": "red"
	}
}
```

### 高度图

```json title=""
"minecraft:overworld_height": {
	"noise_type": "lowlands"
}
```

高度图通过影响种子生成地形的噪声来进行自定义。使用 `"minecraft:overworld_height"` 组件调整主世界的高度图。这里声明的噪声可以通过传递给噪声生成器的数值参数或在原版生成中使用的这些参数的命名预设进行自定义。

> **一个生物群系的高度图只能针对主世界进行自定义。** 下界和末地将其生物群系的高度图设定为保持自身的一致性。

> 如果在生物群系的继承链中的任何位置使用了预设，这个预设将无条件覆盖数值参数的声明。这可能发生在生物群系定义的 `"minecraft:overworld_height"` 组件中同时声明了描述的属性，或者在尝试覆盖行为包堆栈中最初声明的生物群系时。不幸的是，大多数原版生物群系使用预设，限制了这些生物群系的高度图调整仅限于可用的、不可扩展的预设集。

世界生成器将在相邻生物群系的高度图之间平滑过渡。使用高度图调整不可靠地实现渐进下降和斜向高程变化。换句话说，目前无法实现类似世界画家（world painter）的生物群系。

> 高度图无法将生物群系的高度提升到 _y_ 128 以上。地形将在此水平面上变平。同样，高度图在深海的最低深度附近达到底部：大约 _y_ 32。只有[地物](#features)可以超出这些限制。

#### 噪声参数

```json title=""
"noise_params": [0.5, 0.125]
```

噪声参数通过 `"noise_params"` 属性声明为一个二值数组。

第一个值代表生物群系的平均高度。有趣的是，这个参数并不直接使用区块高度（_y_ 坐标），而是被缩放，使得值的增量 1 代表生物群系平均高度上增量 16 个区块。此外，这个值被零设定为大约 _y_ 67 的高度，略高于海平面。这意味着为了设置具有特定平均 _y_ 高度的值，请使用公式：

_f_(_y_) = (_y_ - 67) / 16

因此，将这个值设置为 `1` 将导致平均 _y_ 高度约为 83，类似于山脉生物群系中的小山丘。将这个值设置为 `-2` 将导致表面类似于深海，远低于海平面。

> 第一个参数值为 `-2` 或更低将导致生成错误。在恰好 `-2` 时，不会生成高度图：只有基岩层存在。更低的值可能会在基岩层上方生成地形，但在其他生物群系具有“正常”高度图时，生物群系过渡时将形成巨大的尖峰。避免将此参数的值设置为 `-2` 或更低。

数组的第二个值决定高度变化。负值表现不稳定，通常不应使用；在许多情况下，除了基岩基础外，不会形成地形。值为 `0` 将使地形变化较小，但不会使生物群系完全平坦。值高达约 `0.125` 将生成特别平滑的地形；超过此值将开始形成悬崖、海湾和凹地。较大的悬垂和小型漂浮岛屿从 `0.25` 开始形成；到 `0.5` 时，这些地形特征变得更加常见。值为 `1` 时，地形开始变得锯齿状且难以穿越；大型、不自然的悬垂物普遍存在。趋近于 `4` 时，壮观的大型漂浮岛屿主导景观，但玩家的移动性受限。此外，当第一个噪声参数较温和时，表面的大部分会低于海平面。

随着值的增大，地形变得更加极端，通常不应使用较大的值，原因如下：

- 如果不在创造模式下，玩家会因为早期游戏中的移动选项有限而感到烦恼。
- 通常有用的 Molang 查询，例如 `"q.heightmap()"`，由于生成了类似下界的地架而不是更平滑、更简单的地形，变得不那么有帮助。
- 性能问题可能会在较弱的计算机上出现。

使用噪声参数时，基于平均高度的最大和最小偏移量取决于高度变化。一般来说，第二个噪声参数的增量 1 将导致这些偏移量最多为 +/- 16 个区块。

> 如果希望在生物群系内获得完美平坦的表面，应将 `"noise_params"` 的第二个值设置为 `0` 以最小化高度变化。然后，第一个值应设置为 `4`，高于最大影响值，以确保无条件的高度变化不会低于平均高度的上限。尽管这些值会使生物群系内部生成地形平坦，但生物群系表面仍将根据需要平滑过渡到较低的相邻生物群系，导致巨大的升降，除非所有相邻生物群系也被修改为位于 _y_-高度 128。

#### 噪声预设

```json title=""
"noise_type": "ocean"
```

噪声预设提供了一种方便的方式来模拟原版生物群系生成。无法创建自定义预设。这些预设的确切值难以确定，但它们的名称足够描述，让人了解生物群系将具有何种高度图。

内置的噪声预设包括：

| 预设          | 值                    |
|:--------------|:----------------------|
| 默认          | `"default"`           |
| 变异默认      | `"default_mutated"`   |
| 低地          | `"lowlands"`          |
| 高地          | `"highlands"`         |
| 山脉          | `"mountains"`         |
| 极端          | `"extreme"`           |
| 较少极端      | `"less_extreme"`      |
| 泰加林        | `"taiga"`             |
| 沼泽          | `"swamp"`             |
| 蘑菇类        | `"mushroom"`          |
| 海洋          | `"ocean"`             |
| 深海          | `"deep_ocean"`        |
| 河流          | `"river"`             |
| 海滩          | `"beach"`             |
| 石质海滩      | `"stone_beach"`       |

### 地表构建器

高度图用于控制生物群系的一般形状，而地表构建器用于为生物群系添加风格。地表构建器提供了两种关键机制用于这种风格化：一个用于实际地形生成的块分配模式，以及可选的一组大规模装饰，使生物群系更具特色。

可选的装饰允许生物群系地形特征使用仅通过高度图调整不可能或通过生物群系地物难以实现的方式存在；这些装饰要么形状复杂，要么尺寸巨大。不幸的是，无法创建自定义地表构建器；提供的地表构建器仅用于表示复杂的原版生物群系表面。

> 由地表构建器创建的装饰不幸是固定的，且不相对于声明的高度图。这意味着如果在给定地表构建器创建的装饰所在的位置高度图过高或过低，装饰将不会显现，被地形覆盖。

##### 地表类型

###### 默认

###### 覆盖型

###### 沼泽

###### 砂岩丘陵

###### 冰冻海洋

###### 下界

###### 末地

###### 末地

末地地表是末地维度及其唯一生物群系的指定地表。[由于末地的基础材料不可配置](#dimensional-considerations)，末地地表仅用于生成顶层材料。

#### 维度考虑

下界可能能够采用某些主世界特有地表构建器的实际地表材料，但这些地表的地物，例如坏境地区的尖塔，将永远不会生成。

末地的基础材料以任何方式都不可配置，即使使用末地允许的唯一其他地表类型，[覆盖型地表](#capped)。

#### 继承考虑

由于生物群系的继承，后续定义中的地表构建器可能会与早期定义冲突。由于每种地表构建器类型都是其自身的组件，继承的默认解析系统会使构建器相互对立，通常导致一些奇怪的结果。

只有[默认地表构建器](#default)可以被覆盖。尝试覆盖任何其他构建器将失败，但失败覆盖的内部模式可能实际上仍对生成产生影响。如果两个不同构建器的模式共享相同名称和类型的属性，继承系统仍将使用最初的、不可覆盖的地表构建器，但其块声明将被后声明的地表构建器的匹配属性覆盖。

### 地表调整

```json title=""
"minecraft:surface_material_adjustments": {
	"adjustments": [
		{
			"materials": {
				"top_material": "minecraft:podzol"
			},

			"noise_range": [0, 0.5],
			"noise_frequency_scale": 0.0625,
			"height_range": [72, 255]
		}
	]
}
```

地表调整允许对生物群系的地表块进行微调。尽管被称为“地表”调整，这些调整实际上可以影响符合条件的地表构建器中声明的所有块。这些调整无法修改地表构建器范围之外的块，因此无法用来更改基岩或空气，无论空气是在洞穴中、在高度图上方，还是在地架之间（如果高度图足够极端）。目前，只有默认和沼泽地表构建器支持调整。

地表调整声明使用 `"minecraft:surface_material_adjustments"` 组件的 `"adjustments"` 属性中的对象实现。这些声明既包含对生物群系地表构建器中声明的块的覆盖，也包含应发生这些调整的条件。

地表调整条件可以通过 `"noise_range"` 和 `"noise_frequency_scale"` 检查依赖于 _x_ 和 _z_ 坐标的[随机噪声地表](#noise-intersections)，或通过 `"height_range"` 使用 _y_ 坐标的[简单范围](#height-restrictions)进行检查。如果应考虑所有坐标，则可以同时使用这两种条件。要将调整应用于某个位置，必须满足声明的所有条件；如果有任何失败，条件检查将失败，游戏将退回到地表构建器为该位置声明的块。

没有默认的地表调整会被自动强制应用于生物群系。如果在生物群系的继承链中没有任何地方列出调整，则该生物群系中不会观察到任何调整。

#### 噪声交集

```json title=""
"noise_range": [-1, -0.5],
"noise_frequency_scale": 0.125,
```

依赖于世界种子的噪声曲线可用于限制地表调整的 _x_ 和 _z_ 分量。这个噪声曲线的起点位于世界原点的中心，然后可以通过 `"noise_frequency_scale"` 进一步缩放，以映射到维度的水平面。因此，噪声曲线只能作用于这个水平面，不能作用于 _y_ 坐标；对于 _y_ 坐标，请使用[高度限制](#height-restrictions)。要实际使用噪声曲线限制调整，必须使用 `"noise_range"` 提供一个成功区间。

噪声曲线在特定位置生成的确切值对结果的地表调整无关紧要。唯一需要考虑的是该位置的值是否满足条件检查。

> 尽管两个曲线都是基于世界种子形成的，地表调整使用的噪声曲线与 `"q.noise"` 使用的噪声曲线并不等价。它们的对应关系在生成时不能依赖。

##### 区间

```json title=""
"noise_range": [0.5, 1]
```

用于地表调整的噪声曲线生成位于闭区间 [-1, 1] 上的值。通过 `"noise_range"` 属性使用子区间来定位目标值。

噪声曲线本身具有一些显著的属性，在使用地表调整时应理解这些属性。佩林噪声生成的负值与正值对称；也就是说：与曲线子区间 [-0.8, -0.6] 理论上具有大致相同的形状和代表全范围相同比例的子区间 [0.6, 0.8]。靠近 `0` 的区间往往在地表形成连续螺旋状条带，而远离 `0` 的区间则往往形成小而分散、分布均匀的形状。靠近 `0` 的区间还比远离 `0` 的相同长度的区间与噪声曲线的范围有更大的交集；这意味着如果需要离散形状，如噪声曲线范围极端部分形成的形状，则相对于靠近 `0` 的螺旋路径，可能需要更大的相对区间。

##### 尺寸调整

```json title=""
"noise_frequency_scale": 0.25
```

地表调整噪声曲线使用相对于维度坐标的默认映射，这将形成极其微小的变换。通过设置尺寸值为较小的值来使噪声交集实际变大，从而形成较大的变换区域。例如，值为 `0.125` 是形成大型变换斑块的关键，例如泥炭或粗制泥土簇。较大的值通常用于创造地形的杂乱感。不推荐使用大于默认值 `1` 的值，除非需要类似棋盘格的模式。

### 高度限制

```json title=""
"height_range": [
	"math.random_integer(30, 40)",
	"math.random_integer(60, 70)"
]
```

可以提供高度限制以限制有效的转换区域。这些限制独立于使用噪声曲线的限制，且更为简单。高度限制作为区间提供，仅针对 _y_ 高度的范围内区域进行转换。 `"height_range"` 数组的第一个值必须小于第二个值，否则调整将失败。

直接使用整数将创建单调的调整层。然而，与建立对噪声曲线检查的属性不同，`"height_range"` 属性接受其元素的 Molang 表达式。使用数学函数，可以创建随机分布的区间，以实现更高质量的调整。此外，还提供了一个 `sea_level` 变量，返回该生成实例的维度的海平面：

| 维度      | 海平面 |
|:----------|-------:|
| 主世界    |     63 |
| 下界      |     32 |
| 末地      |     63 |

> 不幸的是，这些表达式中无法使用查询，因此无法相对于高度图或噪声地表进行调整。

#### 移除

可以通过跨相关条件匹配生物群系的[地表构建器](#surface-builders)的定义，移除之前定义的地表调整。例如，恢复 Shattered Savanna 的原始地表调整：

```json title="biomes/savanna_mutated.json"
"minecraft:surface_parameters": {
	"foundation_material": "minecraft:stone",

	"top_material": "minecraft:grass",
	"mid_material": "minecraft:dirt",

	"sea_floor_depth": 7,
	"sea_material": "minecraft:water"
	"sea_floor_material": "minecraft:gravel",
},
"minecraft:surface_material_adjustments": {
	"adjustments": [
		{
			"materials": {
				"top_material": "minecraft:stone",
				"mid_material": "minecraft:stone"
			},

			"noise_range": [0.212, 1.0],
			"noise_frequency_scale": 0.0625
		},
		{
			"materials": {
				"top_material": {
					"name": "minecraft:dirt",

					"states": {
						"dirt_type": "coarse"
					}
				}
			},

			"noise_range": [-0.061, 0.212],
			"noise_frequency_scale": 0.0625
		}
	]
}
```

要将地表恢复到其原始状态，“覆盖回去”地表，使用原始块，例如：

```json title=""
"minecraft:surface_material_adjustments": {
	"adjustments": [
		{
			"materials": {
				"top_material": "minecraft:grass",
				"mid_material": "minecraft:dirt"
			},

			"noise_range": [0.212, 1.0],
			"noise_frequency_scale": 0.0625
		},
		{
			"materials": {
				"top_material": "minecraft:grass"
			},

			"noise_range": [-0.061, 0.212],
			"noise_frequency_scale": 0.0625
		}
	]
}
```

### 气候

```json title=""
"minecraft:climate": {
	"temperature": 1,
	"downfall": 0.25,
	"snow_accumulation": [0.0, 0.125],
	"ash": 1
}
```

生物群系的气候主要代表其环境美学。生物群系气候的各个方面可能会对游戏玩法产生影响，但在原版中很少使用。气候调整适用于 Minecraft 的所有地方，包括末地，但如果维度不支持特定的气候特征（例如主世界以外的[降水](#precipitation)），这些调整可能没有效果。

生物群系气候的所有方面都是可选的。如果没有提供，游戏将使用适合主世界的默认值作为回退。

#### 温度

```json title=""
"minecraft:climate": {
	"temperature": 0.5
	…
}
```

生物群系的**温度**影响各种游戏玩法功能，例如[降水类型](#precipitation)、在适当的块直接受到阳光照射时冰和[雪层的形成](#snow-cover)，以及雪傀儡的存活能力。它通过浮点属性 `"temperature"` 实现，可以无限制地设置：所有可能的浮点值都可以使用。较低的值代表更冷的温度。冻结温度（例如下雪）发生在 `0.15` 以下。如果生物群系定义中未提供温度，游戏将使用 `0.5`；在此温度下，冻结效果在任何维度中任何可放置块的位置都无法观察到。

> 温度的影响不限于主世界，但在其他维度中可能可用的影响较少：如果维度中的 _y_ 高度处温度达到冻结或以下，雪傀儡甚至可以在下界生存。

> `"temperature"` 属性与 `"minecraft:overworld_generation_rules"` 组件中的 `"generate_for_climates"` 属性或 `"minecraft:nether_generation_rules"` 组件中的 `"target_temperature"` 属性中的气候温度无关；这里的属性影响游戏玩法，而非生物群系的放置。

通过这个属性建立的温度不是生物群系的固定温度，而是基础；某个位置的实际温度还取决于 _y_ 高度。海平面或以下的温度固定为这个基础值。在海平面以上，温度每个区块下降 1/600。因此，给定 _y_ 高度 _y_，从声明的温度基础 _t_，海平面高度 _s_，的温度公式 _T_ 为：

_T_(_y_) = _t_ - ((_y_ - _s_) / 600)

要确定生物群系在哪个 _y_ 高度会冻结，使用公式：

_t_(_y_) = 0.15 + ((_y_ - _s_) / 600)

海平面 _s_ 的值取决于维度：

| 维度      | 海平面 |
|:----------|-------:|
| 主世界    |     63 |
| 下界      |     32 |
| 末地      |     63 |

常数 0.15 代表冻结温度。数据驱动的游戏玩法可以使用实体位置的温度来根据实体定义中的 `"is_temperature_value"` 伤害条件过滤器对该实体执行操作，但这超出了本文档的范围。

原版生物群系仅使用从 `-0.5` 到 `2` 的温度值。应完全被雪覆盖的生物群系应使用小于 `0.15` 的值；推荐使用值 `0`。温暖的生物群系，例如那些会损坏雪傀儡的生物群系，应使用大于 `1` 的值。沙漠和下界生物群系使用 `2`。仅应被雪层覆盖的生物群系，应使用大约 `0.2` 到 `0.4` 之间的值，这取决于[温度如何影响雪层生成](#snow-cover)。

#### 降水

```json title=""
"minecraft:climate": {
	"downfall": 0.5
	…
}
```

**降水**在主世界中以雨或雪的形式可见。浮点属性 `"downfall"` 控制生物群系内降水的程度。目前，该属性仅在闭区间 [0, 1] 上表现；超出此区间的值将被限制为最接近的有效值。值为 `0` 或更低时，此属性将在生物群系内禁用所有降水效果。值为 `1` 或更高时，降水效果将达到最大化。介于 `0` 和 `1` 之间的值将按比例缩放。

> 由于一个错误，降水的调整**永远不会**在下雨或下雪时反映到落下的粒子中。无论降水的覆盖如何，沙漠变种、稀树草原变种或砂岩丘陵变种的降水粒子永远不会可见；任何其他生物群系（包括自定义生物群系）中的粒子**始终**可见，尽管下雨或下雪。尽管如此，**大多数**受降水影响的游戏玩法仍会正常表现。

降水效果在原版游戏玩法中的示例包括下雪时添加雪层、下雨时填充暴露的蒺藜和钓鱼时鱼类生成所需的时间。某些应考虑此值的游戏玩法方面将忽略它，例如具有 `"in_water_or_rain"` 伤害过滤器的实体。 `"downfall"` 的较低值将相应地减缓降水效果，即在值为 `0.1` 时，雪层的形成速度是值为 `1` 的十分之一。

某位置发生的降水类型取决于其 _y_ 坐标。如果值为[冻结的，`0.15` 或以下](#temperature)，该位置将下雪；否则，将下雨。

#### 雪层

```json title=""
"minecraft:climate": {
	"snow_accumulation": [1, 0.5],
	…
}
```

当生物群系生成时，处于[冻结温度](#temperature)的块通常在其上方覆盖**雪层**：堆叠在合格块上的雪层。 `"snow_accumulation"` 属性用于调整这种雪层。雪覆盖似乎是生物群系生成的最后一遍，这意味着雪将覆盖地物以及生物群系的表面。

> 雪也可以在生物群系生成后作为[雪降水](#precipitation)的一部分覆盖，但 `"snow_accumulation"` 属性在这种情况下无效。使用 [`"downfall"` 属性](#precipitation)来调整雪的形成速度。

此属性接受一个由两个浮点值组成的数组，[*a*, *b*]，其中 _a_ 影响覆盖合格块的雪层的平均高度，_b_ 影响雪的分布。

具体来说，_a_ 代表覆盖合格块上的雪层的最大块数。平均而言，雪层的实际高度约为该值的 40%。几乎不会有没有雪覆盖的块，几乎不可能有块具有最大雪覆盖。由于此值代表块高度，每个实际的雪层仅高八分之一块，因此必须使用浮点值来针对较浅的雪覆盖。例如，要使雪覆盖最多为 4 层，使用值 `0.5`。在此值下，几乎所有合格块的覆盖将为 2 或 3 层。

数组的第二个值 _b_ 旨在调整雪的分布，但许多 _b_ 的值会导致不稳定的行为，即使是表现良好的值对生成的影响也很小。值为 `0` 或更低总是导致合格块上方仅有一层雪覆盖，完全忽略了 _a_ 设置的值。仅在 `0` 到 `0.125` 之间的值会导致整个区块随机只有一层雪覆盖，而所有其他区块则遵循 _a_ 的值。值达到 `0.125` 或更高时，会导致雪覆盖的温和调整，与 _a_ 设置的值无关；换句话说，_a_ 的极端值几乎无法被 _b_ 的变化察觉。此外，由 _b_ 引起的调整仅适用于少量块，这使得该值充其量是无用的，最坏情况下是有缺陷的。因此，**建议在声明 `"snow_accumulation"` 的地方将此值设置为 `0.5`。**

> 无法方便地在冻结区域避免雪覆盖。雪覆盖不会影响不适合放置雪层的块。要避免雪，请选择较暖的[`"temperature"` 值](#temperature)。

#### 粒子装饰

```json title=""
"minecraft:climate": {
	…

	"white_ash": 0.5
}
```

**粒子装饰**是在生物群系内可见的环境粒子风暴。这些属性仅具有装饰性；与生物群系气候的其他方面不同，粒子装饰不会影响游戏玩法。如果未提供，生物群系中将不会有粒子效果。当前无法使用自定义粒子。原版生物群系中有 4 种不同的粒子装饰可用于任何地方：

| 装饰类型      | 属性名称         |
|:---------------|:-----------------|
| 灰烬          | `"ash"`          |
| 白灰烬        | `"white_ash"`    |
| 红孢子        | `"red_spores"`   |
| 蓝孢子        | `"blue_spores"`  |

这些装饰将在生物群系内持续存在。如果玩家处于生物群系的范围内，这些粒子将可见，即使在地下或水中或岩浆中。如果未声明，生物群系中将不会使用粒子。

由于它们作为 `"minecraft:climate"` 组件中的浮点属性存在，其强度是可调节的。浮点值适用于任何大于 `0` 的数字。值越大，同时使用的粒子越多；负值或 `0` 将禁用该效果。

> 不建议将此值设置得过大，因为粒子数量可能导致崩溃。值为 `16` 时，屏幕将被粒子淹没，但风暴中生物群系仍仅能勉强看见。

## 游戏玩法

生物群系是Minecraft中大多数可配置游戏玩法的起点。像树木和村庄这样的地物只能作为生物群系的一部分生成。然后可以为生物群系和结构配置自动生成的怪物。地物附加和怪物生成超出了本文档的范围，但有一些生物群系定义的配置可以影响生物群系与其他游戏玩法系统的交互。

### 地物

```json title=""
"minecraft:forced_features": {
	"surface_pass": {
		"identifier": "wiki:grasslands_caravan_feature",
		"places_feature": "wiki:caravan_feature",

		"scatter_chance": "100 * math.pow(2, -4)",

		"x": {
			"distribution": "uniform",
			"extent": [0, 16]
		},
		"z": {
			"distribution": "uniform",
			"extent": [0, 16]
		},
		"y": "q.heightmap(v.worldx, v.worldz)"
	}
},
"minecraft:ignore_automatic_features": {}
```

如果在世界中生成的一组方块不是由地表生成器创建的，则它们由地物创建。地物是Minecraft游戏玩法的基础：原版地物范围从树木到村庄再到巨石。生物群系中的地物可能决定了该生物群系对玩家的价值。

地物大多不属于生物群系的范围，但应注意影响地物生成的生物群系模式中的两个组件。

#### 强制地物

```json title=""
"minecraft:forced_features": {
	"surface_pass": [
		{
			"identifier": "wiki:redwood_tree_feature",
			"places_feature": "wiki:redwood_tree",

			"iterations": "math.random_integer(2, 4)",

			"x": {
				"distribution": "uniform",
				"extent": [0, 16]
			},
			"z": {
				"distribution": "uniform",
				"extent": [0, 16]
			},
			"y": "q.heightmap(v.worldx, v.worldz)"
		}
	]
}
```

`"minecraft:forced_features"` 组件可用于在生物群系中强制生成地物，而无需使用[地物规则](#/concepts/features/)。

强制地物按每个通过的数组顺序放置。当覆盖之前为放置通道提供的地物附加数组时，之前的地物附加将被覆盖，只有新的附加会被使用。要同时使用旧的附加和新的附加，必须在覆盖中重新声明它们。

默认情况下，定义中不含有任何强制地物；如果在继承链中从未声明，便不会存在额外的地物。请注意，[某些地物](#immutable-features)是硬编码的，无法轻易移除。

#### 外部地物

空的 `"minecraft:ignore_automatic_features"` 组件旨在表明声明的生物群系将忽略所有附加到它的外部地物规则，但该组件目前无论是用于覆盖还是初始定义都不起作用。

##### 不可变地物

即使在没有附加标签的自定义生物群系中，某些地物也可能生成。这些地物目前无法方便地移除：

- 泉水（含水和熔岩的“湖”）
- 破败的传送门
- 矿井
- 地牢<sup>*</sup>
- 下界堡垒

> 由于其他主世界不可变地物产生的空间，地牢结构可能会偶尔生成；其生成通常依赖于洞穴系统，[可能被禁用](#caves)。

这些地物甚至在数据驱动地物的第一次放置通道之前生成，甚至可以穿过基岩层。不可变地物可以被数据驱动地物覆盖，但这通常难以实现或成本过高。

一个通常无处不在的主世界结构，守卫堡垒，无论如何都无法配置在自定义生物群系中生成。

### 洞穴

雕刻器在世界中生成类似洞穴的地物。与Minecraft Java版不同，基岩版目前没有自定义雕刻器的方法。然而，洞穴生成可以通过[生物群系的地表](#surface-builders)中使用的方块类型来影响。方块白名单允许雕刻器切割它们以生成洞穴。至少，这些方块包括：

- 石头
- 泥土
- 砂岩
- 草
- 犁地泥炭
- 菇石
- 沙子

这些方块的所有变体，例如抛光安山岩（石头的一种变体）都可以被雕刻器切除。当前无法配置自定义方块以被切除，通常导致高度自定义的生物群系没有洞穴。未在白名单中的方块不会阻止切除，因此如果地表生成器的顶层未在白名单中，假设下面的方块 _已_ 在白名单中，洞穴生成可能会在其下方继续。

洞穴仅在构建地表的高度图（包括其调整）之后创建；由地表生成器创建的装饰，如冰山，不会被洞穴生成打断。洞穴始终在数据驱动地物的第一次放置通道之前完全生成。

### 标签化

```json title=""
"components": {
 …
 
 "urban": {},
 "city": {},
 "metro": {},

 "rare": {}
}
```

标签在Minecraft中为生物群系赋予生命的许多方面提供支持，包括实体生成、外部地物附加和数据驱动的游戏玩法。[由于某些标签也被（设计不佳地）用于确定生物群系可能生成的位置](#regions)，在尝试将放置与形式和功能分离时可能会出现问题。有关标签的实现细节，请参见[标签](#tags)。

生物群系的性质不会隐含任何标签。例如，如果一个生物群系设置为在主世界中生成，使用在此类生物群系上的 `"overworld"` 标签需要手动添加以选择加入该标签的后果。另一个显著的影响是，自定义生物群系的指定子生物群系需要重新声明与该生物群系集群相关的标签。例如，想象一个基础生物群系及其有树林突变的子生物群系。无论突变如何，这两个生物群系都应有高草，通过 `"highlands"` 标签在这些生物群系中放置高草。基础生物群系的示例：

```json title="biomes/highlands.json"
{
	"format_version": "1.13.0",

	"minecraft:biome": {
		"description": {
			"identifier": "highlands"
		},

		"components": {
			…

			"minecraft:overworld_generation_rules": {
				"generate_for_climates": [
					["cold", 2]
				],

				"mutate_transformation": "highlands_forest"
			},

			"overworld": {},
			"highlands": {},

			"animal": {},
			"monster": {}
		}
	}
}
```

子生物群系 _必须_ 重新声明 `"highlands"` 标签以选择加入其功能 —— 在这种情况下，是在地表散布高草：

```json title="biomes/highlands_forest.json"
{
	"format_version": "1.13.0",

	"minecraft:biome": {
		"description": {
			"identifier": "highlands_forest"
		},

		"components": {
			…

			"overworld": {},
			"highlands": {},
			"forest": {},

			"animal": {},
			"monster": {}
		}
	}
}
```

如果没有该标签，子生物群系将显得贫瘠。基础生物群系与其突变之间的过渡将显得奇怪和不一致。

#### 标签策略

由于生物群系定义的继承系统，应在标签化时使用策略以分离关注点。

##### 生物群系分类法

可以创建一个分类系统，通过将焦点放在生物群系本身上，将生物群系绑定到其他系统。添加帮助通过生成规则单独识别生物群系的标签对于需要在一组共享条件下生成地物的特性非常有用。一些基本分类法的示例包括使用标签来指定：

- 生物群系基本类型的名称
- 生物群系生成的维度
- 生物群系的[气候类型](#climates)或[所定义的特征的强度](#separation-of-concerns)
- 生物群系的[变体](#hierarchy)

对于理论上的南瓜牧场阴森山丘生物群系，分类标签示例可能包括：

- `"overworld"`
- `"cold"`
- `"pumpkin_pastures"`
- `"hills"`
- `"mutation"`（“阴森”方面）
- `"spooky"`，但仅当这种突变特性与其他生物群系共享时

原版生物群系历来依赖分类系统进行生物群系选择，经常导致生成或生成的成功条件冗长。以下是 `wolf.json` 生成规则的一个片段：

```json title=""
"minecraft:biome_filter": {
	"all_of": [
		{"test": "has_biome_tag", "operator":"==", "value": "forest"},
		{"test": "has_biome_tag", "operator":"!=", "value": "mutated"},
		{"test": "has_biome_tag", "operator":"!=", "value": "birch"},
		{"test": "has_biome_tag", "operator":"!=", "value": "roofed"},
		{"test": "has_biome_tag", "operator":"!=", "value": "mountain"}
	]
}
```

在这种情况下，可以使用另一种标签观点来简化创作过程。

##### 生成与生成视角

通过将标签视角转移到地物和生成规则上，可以大大简化生成和生成条件的编写。[Minecraft 1.16开始，Mojang在新的下界生物群系中采用了这种系统，以分离生物群系类型和位置与功能。](#other-mobs) 现在存在许多用于下界怪物生成的标签。

想象一下可以在任何有树木的区域生成的鸟类生物，可以根据生物群系的树木密度开发一个标签系统。从另一个角度，这些生物群系还可以被标记为 `"forested"`，甚至提供与树木密度相关的标签：

| 森林覆盖 | 以地物为重点的标签 | 以生物群系分类法为重点的标签 |
|:---------|:--------------------|:-------------------------------|
| 少量     | `"few_birds"`       | `"lightly_forested"`           |
| 中等     | `"default_birds"`   | `"moderately_forested"`        |
| 大量     | `"many_birds"`      | `"heavily_forested"`           |

后一种系统的问题在于，如果某些其他游戏玩法方面依赖于生物群系中存在树木，开发过程中会发生什么。例如，假设仅使用生物群系分类系统：

创建一个旨在隐藏在树木覆盖下的废弃森林小屋结构地物；其地物规则将检查任何3个森林标签以生成。后来在行为包开发中，构建了一个新的、极为森林化的有毒废物生物群系 Toxic Woods，带有 `"heavily_forested"` 标签。废弃小屋在这里可能适应环境，但自然应当稀少甚至缺失；应当很少或没有鸟类生成。不幸的是，这里的 `"heavily_forested"` 标签会导致许多鸟类生成，这是不可取的。鸟类的生成规则必须更新以将 Toxic Woods 加入黑名单。

在游戏中有数十个或数百个生物群系、地物和生物都依赖于同一标签系统，这样的例外会累积。考虑使用以地物为重点的标签系统。这些系统不必与分类法竞争；可以根据需要同时包含和使用这两种类型。

#### 原版标签

用于原版生物群系的标签应注意，用于仅轻微更改或添加原版生成的生物群系修改行为包。这些标签可用于在自定义生物群系中模拟原版的游戏玩法方面。

##### 位置与变体

原版生物群系中使用的大多数标签用于通过位置和变体组织生物群系，形成一种生物群系分类法，用于定位生物群系。

> Roofed Forests 的生物群系定义中存在一个 `"no_legacy_worldgen"` 标签，但其行为未知。

###### 维度

```json title=""
"components": {
	…
 
	"overworld": {}
}
```

存在4个支持游戏维度的标签：

| 维度               | 标签                      |
|:-------------------|:-------------------------|
| 主世界             | `"overworld"`            |
| 主世界生成         | `"overworld_generation"` |
| 下界               | `"nether"`               |
| 末地               | `"the_end"`              |

> 主世界生成标签是Minecraft所需，用于支持遗留特性和行为。需要针对所有主世界的生成特性、实体生成和游戏玩法应筛选同时包含 `"overworld"` 和 `"overworld_generation"` 标签，但该筛选的构建超出了本文档的范围。

这些标签对生物群系具有混合效果，但主要用于进一步组织或结合其他标签过滤生物群系。这里任何标签的最直接效果是 `"overworld"` 标签，使矿石和一些其他地下地物得以生成。

###### 生物群系

```json title=""
"components": {
	…
 
	"taiga": {},
	"mega": {},
	"hills": {}
}
```

存在多个原版生物群系标签，以支持这些生物群系的特定性质。

对于主世界：

| 生物群系            | 标签                  |
|:--------------------|:---------------------|
| 平原               | `"plains"`           |
| 森林               | `"forest"`           |
| 山脉               | `"extreme_hills"`    |
| 泰加               | `"taiga"`            |
| 沼泽               | `"swamp"`            |
| 花卉森林           | `"flower_forest"`    |
| 丛林               | `"jungle"`           |
| 沙漠               | `"desert"`           |
| 稀树草原           | `"savanna"`          |
| 荒地               | `"mesa"`             |
| 雪原               | `"ice_plains"`       |
| 蘑菇岛             | `"mooshroom_island"` |
| 海滩               | `"beach"`            |

对于下界：

| 生物群系            | 标签                 |
|:--------------------|:--------------------|
| 下界荒地            | `"nether_wastes"`   |
| 灵魂砂谷           | `"soulsand_valley"` |
| 玄武岩三角洲        | `"basalt_deltas"`   |
| 猩红森林           | `"crimson_forest"`  |
| 扭曲森林           | `"warped_forest"`   |

存在两个严格用于分组相关生物群系的标签：

| 组别                        | 标签                   |
|:----------------------------|:------------------------|
| 雪原和雪山                 | `"ice"`                 |
| 猩红森林和扭曲森林         | `"netherwart_forest"`   |

一些标签用于单独标识独特的变体：

| 变体                           | 标签         |
|:--------------------------------|:------------|
| 巨树泰加变体                   | `"mega"`    |
| 石岸变体                       | `"stone"`   |
| 桦木森林变体                   | `"birch"`   |
| 暗森林变体                     | `"roofed"`  |
| 竹林丛林变体                   | `"bamboo"`  |
| 稀树草原和荒地高原变体         | `"plateau"` |
| 丛林边缘变体                   | `"edge"`    |

###### 主世界生成方面

```json title=""
"components": {
	…
 
	"ocean": {},
	"deep": {},
	"warm": {}
}
```

存在用于在主世界中插槽和匹配气候及转变的标签组。

用于在主世界中插槽生物群系的三个标签是：

| 插槽                                 | 标签       |
|:-------------------------------------|:----------|
| 海洋                                 | `"ocean"` |
| 深海（与 `"ocean"` 标签结合使用时）  | `"deep"`  |
| 稀有陆地                             | `"rare"`  |

> 如[区域](#regions)中所述，这些标签对世界生成有实际影响。仅在生物群系放置时使用这些标签。

存在4个用于[主世界温度变化](#climates)的标签：

| 气候      | 标签          |
|:---------|:-------------|
| 冰冻      | `"frozen"`   |
| 寒冷      | `"cold"`     |
| 微暖      | `"lukewarm"` |
| 温暖      | `"warm"`     |

存在一个用于每种类型主世界子生物群系的标签：

| 子生物群系类型 | 标签         |
|:---------------|:------------|
| 山丘           | `"hills"`   |
| 突变           | `"mutated"` |
| 河流           | `"river"`   |
| 岸边           | `"shore"`   |

##### 怪物生成

怪物生成主要由两个标签控制：`"animal"` 和 `"monster"`。对原版怪物生成的更精细控制在某些特殊情况下提供，但通常需要同时添加标签到生物群系定义和覆盖生成规则以配合这些新标签。

> 覆盖生成规则超出了本文档的范围。

未在本节中列出的原版怪物通过选择原版生物群系特定标签来生成。例如，狼只在带有 `"forest"` 或 `"taiga"` 标签的生物群系中生成。可以使用这些原版标签之一标记自定义生物群系以生成狼，但这样做可能会产生意想不到的后果。例如，森林和泰加的地面装饰可能会在自定义生物群系中生成。相反，应使用自定义标签添加，并将生成规则适配到这些新标签。

###### 动物

```json title=""
"components": {
	…
 
	"animal": {}
}
```

使用 `"animal"` 标签将允许牛、鸡、羊、猪和蝙蝠在生物群系中生成。

存在一个 `"bee_habitat"` 标签，可能用于生成蜂巢，但未使用。

###### 其他生物

```json title=""
"components": {
	…
 
	"monster": {}
}
```

`"monster"` 标签允许僵尸、骷髅、蜘蛛、苦力怕、史莱姆、末影人、女巫和幻翼在生物群系中生成。

从Minecraft 1.16开始，Mojang在新的下界生物群系中采用了[新的标签策略](#spawning-generating-perspective)，以分离生物群系类型和位置与功能。现在存在许多用于下界怪物生成的标签。

| 怪物生成规则                                          | 标签                             |
|:-------------------------------------------------------|:--------------------------------|
| 猪灵                                                   | `"spawn_piglin"`                |
| 少量猪灵                                               | `"spawn_few_piglins"`           |
| 僵尸猪灵                                             | `"spawn_zombified_piglin"`      |
| 少量僵尸猪灵                                         | `"spawn_few_zombified_piglins"` |
| 幽灵                                                   | `"spawn_ghast"`                 |
| 熔岩史莱姆                                           | `"spawn_magma_cubes"`           |
| 大量熔岩史莱姆                                       | `"spawn_many_magma_cubes"`      |
| 末影人（仅在同时带有 `"nether"` 标签的生物群系中考虑） | `"spawn_endermen"`              |

##### 装饰

目前，地物和装饰仅通过[定位特定类型的生物群系](#location-variation)来应用；尚无专用的装饰标签。