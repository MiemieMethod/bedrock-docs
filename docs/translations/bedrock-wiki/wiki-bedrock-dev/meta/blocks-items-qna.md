---
title: 方块与物品问答 2024/08/30
category: Q&A
mentions:
    - SmokeyStack
---

此次问答在[基岩附加包 Discord 服务器](https://discord.gg/uZF75ZxcJq)举行。九位 Mojang/Microsoft 员工参与回答了关于自定义方块与物品 API 的问题。问题由社区收集。

:::warning
并非所有消息都被复制过来，并且部分内容经过了编辑修改。如果你想查看全部内容，请加入上述 Discord 并获取“事件存档”角色。
:::

## HCF 已弃用/移除功能的替代方案？

- **问**：是否有计划重新引入 HCF 实验中全部或部分已弃用/移除的功能，无论是直接重新引入还是通过新方法？举例来说，`minecraft:knockback_resistance` 用于物品，`minecraft:unwalkable` 用于方块。
- **答**：在处理这个问题时，我们优先考虑了正在使用的 HCF 功能，对于未使用的部分，最初的工作中并未包含。然而，这些功能应该在我们的待办事项列表中，未来会继续推进（如果还不在，将在此问答之后加入），感谢你的反馈！

## 最近的更改原因？

- **问**：你们是如何想出最近非常有趣的更改的，是什么激励了你们？为什么在你们看来，用自定义组件替换 HCF 是个好主意？
- **答**：HCF 事件在稳定性、可扩展性方面存在一些问题，整体上（我们认为）使用起来比较笨拙。最终决定需要一个完全不同的解决方案来长期支持该功能。脚本更加稳定，功能扩展更容易，并且与其他现有功能更为一致，此外功能更强大。我们尝试了几种将脚本和 JSON 事件集成的方法，最终形成了今天的自定义组件。明年我们有一些改进自定义组件的计划，期待与大家分享！总体而言，我们认为自定义组件为创作者提供了更强的能力，并且比 HCF 事件在基岩平台上有更好的长期支持。

## 自定义瓷砖实体

- **问**：是否有机会创建你自己的方块——箱子？
- **答**：这在近期路线图上没有计划，但我们正在积极研究所有无法通过数据复制的方块行为！
- **问**：是否有计划添加瓷砖实体？或者至少，方块动画？
- **答**：绝对是一个值得探索的有趣领域。我认为有了自定义方块组件（脚本），"伪造"这些功能会容易得多。我认为方块实体的大部分功能都能通过这个实现。一件事是你无法轻松做到的是方块特定的存储（比如箱子库存），所以能以某种方式启用这一点会非常好。

## 物品描述组件

- **问**：是否有计划为物品添加描述组件，允许我们为物品添加描述？在原版中，音乐唱片和山羊角是一个很好的例子。一个很好的用例是自定义音乐唱片，或者一个带有简短描述的使用方法的物品。如果我们制作自己的药水，这也很有用，因为我们可以使用这个组件列出效果。
- **答**：这是一个有趣的想法！但目前这不在我们的近期路线图上。如前所述，脚本 API `getLore` 可以在这里提供帮助，但在创意菜单中无法使用。

## 自定义组件

- **问**：是否有计划允许数据绑定到自定义组件，而不是我们目前拥有的“拥有”或“没有”接口？
- **答**：这是我们期待实现的功能，预计明年某个时候会推出。我们希望将自定义组件简化为更像其他组件的形式。
- **问**：这是否包括参数，或者它们会更快推出？参数会使自定义组件在物品和方块之间以及项目之间更易共享。
- **答**：自定义组件的简化和参数很可能会同时发布，并且可能需要脚本版本 2.0.0。目前我们表示这些功能将于明年某个时候推出。

## 更多使用 ScriptAPI：

- **问**：我不太清楚其他人在创建附加包之前做了些什么，但我来自 JavaScript 网站创建/ Discord 机器人创建背景，发现处理所有那些 JSON 文件相对困难。我并不是建议完全废除它们，但我希望将方块和物品的视觉特征留在 JSON 文件中，将所有与事件、函数等相关的内容移到 API 中，这在主要部分使用代码语言（如 JavaScript 或用于 Minecraft Java 的 Java）开发时是常见的。我可能会让一些人不高兴（HCF 移除也受到了一些反对），但作为一个普通开发者，在开始创建附加包时发现这有些奇怪和令人困惑。

    在我脑海中，它应该是这样的：

    - 你的 JSON 文件（包含关于你的方块/物品的基本信息，如纹理、几何、类别等）
    - 将该 JSON 文件导入到你的脚本中
    - 注册方块/物品
    - 并使用 API 功能。（例如 item.attackDamage(Int) 等，或一般与视觉无关的所有内容，主要是方块/物品的行为）

- **答**：我认为总体上我们一直在慢慢朝着“JSON 是定义，脚本是逻辑”的方向发展，我觉得这就是你的帖子所表达的想法（尽管有更多的“魔法连接”，无需将 JSON 导入脚本）。

## 文档

- **问**：是否有计划在 MS Learn 或 wiki.bedrock 更新带有 JavaScript 工作示例的内容？
- **答**：从我们团队的角度来看，我们认识到部分文档存在空缺，未来我们定义完成标准的一部分将是为学习门户添加更好的使用示例，同时我们会发布更多 API。也就是说，目前可能会是 TypeScript 示例。我也意识到 TypeScript 的学习曲线有点陡峭，所以我会将这个想法反馈给团队，看看是否可以提供多种方式（例如 TypeScript 和 JavaScript），但目前没有承诺。但这是非常好的反馈，感谢！
- **答**：我们也在努力使脚本和示例在文档中更易于访问和使用… 最早下周😉
- **问**：记录方块如何下落。我之所以问这个问题是因为 Minecraft 中的沙子更像是受到重力影响的实体，但当我尝试在过去重现它时并未成功，所以最好有一个沙子的模板文件，这样我们可以创建自己的沙子类型。
- **答**：我会将这个作为文档请求，感谢！

## 自定义音乐唱片

- **问**：我们已经有能力使用 "minecraft:record" 制作自定义音乐唱片，但是否有计划使组件与自定义音乐兼容？
- **答**：不幸的是，这不在我们的近期路线图上😦

## 水logging

- **问**：是否有计划为自定义方块添加 waterlog/snowlog 组件？
- **答**：是的！Waterlogging 是我们的短期路线图（大约 6 个月），而 snowlogging 仍然是长期计划的一部分（+6 个月）。
- **问**：Lava logging 也是吗？
- **答**：那也是长期计划的一部分 <:bao_doggo_happy:939767354261372978>

## 物品属性

- **问**：物品属性未来是否会被考虑？能够存储每个物品的数据并通过客户端查询将非常有用——如果仅为不可堆叠的物品添加（如脚本 API 中目前的物品动态属性），那将很酷 👍
- **答**：感谢对此领域的请求！

    我们可能会首先在物品领域做更多基础设施（物品堆栈在某种程度上没有像方块或实体那样的“身份”），我认为这是为赋予它们类似方块属性系统的一个前提条件。所以这可能是一个中期的事情，需要加强物品功能，然后才能（长期）添加新功能。

## 具有翻页动画的物品

- **问**：是否可以创建具有翻页动画或至少具有多个纹理的物品？像原版的指南针或手表一样。
- **答**：我会将这作为功能请求。我记得翻页功能更深入地与方块关联，所以可能不容易适配到物品。此外，我们在中期需要对物品进行一些改进，以“加强”它们，然后才能开始赋予它们像物品属性这样的东西……抱歉，总之，这在短期或中期内都不会实现😦

## 接触水时破坏方块的方法

- **问**：游戏内示例：

    - 地毯
    - 可耕种的方块/植物

    这是我一直想在附加包中实现的功能。我曾尝试使用脚本 API 构建此系统，但 Minecraft 中的水会以各种奇怪的形状和模式剧烈变化，这使得检测所有情况变得不可能。

    谢谢

- **答**：这将作为方块组件的一部分，列入我们的短期路线图（大约 6 个月以内）！

## 红石

- **问**：`redstone_conductivity` 是一个很好的开始，但要制作一个真正的红石设备，它必须能够响应红石信号。虽然你可以通过脚本读取红石功率，但这个过程效率低，因为你必须使用队列刻（queued ticks）不断检查。同时没有生成红石功率的能力，所以你无法制作响应如日光传感器等刺激的传感器。
- **答**：感谢你的想法，我会将其带到团队讨论，看看它如何适应我们现有的计划！

## `blocks.json` 的未来计划

- **问**：`blocks.json` 文件未来的发展计划是什么？目前，它有一些重大限制，包括与自定义几何方块的不兼容性，这是最常见的问题之一。这个文件会被升级或替换吗？此外，最初让创作者可以使用它的意图是什么？我很感兴趣！
- **答**：简短回答是我们计划放弃 `blocks.json`，至于最初的意图，那是在我之前的时期😆。但一旦它消失，时间会治愈一切创伤。

## `onBlockUpdate` 和 `onBlockDestroyed`（任何）自定义组件

- **问**：我真的希望添加这两个事件，这会让一些事情更容易实现
    `onBlockUpdate`，这将使连接方块和门更容易实现
    `beforeBlockBroken`，在方块以任何方式被破坏时，包括怪物或命令
- **答**：这是我们已经研究过的事情，不幸的是，它比看起来更复杂。方块更新时邻近方块变化不在我们的近期路线图中。然而，`beforeBlockDestroyed` 事件是一个很好的功能请求，我们可以考虑实现，但目前不在我们的路线图上。

## 自定义方块中的颜色映射

- **问**：是否有计划让自定义方块使用颜色映射，如草和叶子？
- **答**：是的，我们在内部路线图中有这个计划。在中期和长期之间的某个时候，具体时间尚未确定。不过肯定会在明年某个时候。

## 通过 ScriptAPI 获取带有 `minecraft:storage_item` 组件的物品库存

- **问**：就像我们可以对实体做的那样，对物品的库存进行操作，并具备移除、添加物品等能力。
- **答**：这在待办事项列表中！不确定具体何时会实现。理想情况下，未来它们会更加“耦合”并更紧密地一起推出😄

## 自定义创意类别和物品组

- **问**：能够将物品和方块添加到创意库存中的现有或新类别
- **答**：你目前可以创建自己的物品组，如果你添加一个唯一名称，它会将你添加的物品捆绑在一起，但它不会像“折叠组并添加加号”图标那样酷，只是将它们全部移动在一起。

    将内联自定义组系统功能化，使其像原版组一样，是我们的短期路线图！

    我们目前在路线图中没有自定义类别。

## 物品旋转组件

- **问**：该组件的目的是允许玩家在 x、y 和 z 轴上以任意角度旋转手中的物品（允许旋转物品而无需使用 attachable 方法）。
- **答**：我们已经有物品显示转换用于方块物品，对于其他 3D 物品，应该可以通过 attachables 实现？

## 更多方块几何功能

- **问**：我喜欢与方块一起工作，但有时我真的希望有一些我们目前没有的功能或工具。但特别是关于方块几何，这些是我的问题 <:bao_icon_entities:937567566442922084> ：

    - 我们能否独立旋转骨骼和纹理？使用 `minecraft:transformation` 组件甚至是 `minecraft:geometry` 本身？
    - 目前有计划改进方块几何吗？类似于 `item_display_transforms` 之类的东西。
    - 未来是否可以通过脚本修改方块几何？

- **答**：所以关于数据驱动的几何改进，我们正在积极进行中，部分物品转换工作也在预览中。所以简短回答是是的。至于通过脚本修改几何，这目前不在计划中。
- **问**：`full_block` 和 `cross` 很棒。不过，能否有更多？有很多形状，无论是爱好者还是专业人士都希望模仿原版的，比如台阶和楼梯。几乎每个包含自定义方块的资源包都需要包含这些，感觉有点不必要的膨胀。
- **答**：目前我们没有其他数据驱动的原版几何，但这绝对是我们长期目标之一。许多功能，如物品转换和 UV 锁定，都是为了达到与原版功能的平衡，使我们能够暴露更多的原版几何。

    你认为有哪些原版几何特别有用，值得关注？

## 带存储的方块锁定模式

- **问**：众所周知，物品锁定模组无法在存储方块上工作。有什么计划改变这一点吗？
- **答**：你可以尝试使用 `block_placer` 组件让你想要的方块由物品放置。

    并使用 attachable 在手中拥有方块外观。

## 不可移动方块

- **问**：这是一个被移除的功能。我希望再次拥有使方块不可移动的方法。这可以通过组件或事件取消来实现。
- **答**：这在我们的待办事项列表中，但不确定何时会实现。

## 方块多网格模型支持

- **问**：目前我们有一个实验性机会，仅用于实体模型的多网格模型。
- **答**：多网格模型很麻烦。绝对没有扩展的计划。

## 自定义护甲饰品

- **问**：希望能够创建自己的图案模板，以及用于图案的自定义颜色和物品。
- **答**：你好，感谢请求！

    你所说的“用于图案的自定义颜色的物品”是什么意思？

    我们确实有扩展护甲饰品的想法，但近期路线图上没有相关计划。

## 在物品中存储实体

- **问**：拥有能够存储实体数据的物品和方块将非常有用。
    例子：

    - 自定义生物桶
    - 自定义蜂巢

    这可以通过组件和脚本处理

    ```json
    "minecraft:entity_storage": {
        "release_on_destroyed": true,
        "max_entities": 1
    }
    ```

    不确定这种语法的可行性，但类似的东西会很好

    ```js
    const storage = block.getComponent("minecraft:entity_storage");
    let stored_entity = storage.entities[0];
    dimension.spawnEntity(block.location, stored_entity);
    ```

- **答**：我真的很喜欢这个想法！当我过去考虑这个问题时，我设想允许创作者“透明地”快照方块（方块 + 方块实体）、物品（整个物品堆栈）和实体（谁的实体 NBT），以便“持久化”数据。但我们不会允许解析/数据嗅探等，以防止一些非常奇怪的行为。

## 是否有 onEquip/onUnequip 事件的计划？

- **问**：如果物品自定义组件接口（或 world.afterEvents）支持在 `equippable` 槽位变化时触发事件，那将非常有帮助。

    可能是 `onEquip(arg: {slot: ContainerSlot})` 和
    `onUnequip(arg:{slot: ContainerSlot, previousItemStack: ItemStack})`

    这将使创建高效的被动效果成为可能（如提供夜视的头盔等），而无需像现在那样使用 runInterval 不断检查每个玩家的可装备槽位，这会带来性能影响。

- **答**：我们有库存事件的概念——包括装备事件。我们希望在“自定义物品组件”事件中考虑这一点。

    这不是我们当前正在研究的，但我们希望在中期或长期内实现。

## 自定义按键绑定/按钮功能用于物品

- **问**：希望能够让物品在特定按键/按钮按下时运行脚本。在制作地图或战斗附加包时，这将非常酷！
- **答**：我们正在研究一些关于移动的“非常原始”的输入 API。主要是适用于所有输入模式的“兼容”功能。自定义绑定（包括触摸屏 UI）在我们的考虑范围内，但目前不在待办事项列表中。

## 更多方块渲染选项

- **问**：目前，我们有 4 种渲染方法：`alpha_test`，`opaque`，`blend`，`double_sided`。每种都有其优缺点。然而，带有透明像素的方块需要使用 `alpha_test` 或 `blend`。这两者都有各自的问题，`alpha_test` 在 70 个方块外完全不渲染，`blend` 也有一些问题，其他人在这个 Discord 中也提到过。根据我的了解，这些选项也不允许像原版玻璃那样进行面剔除。

    Mojang 是否计划为方块添加基于距离改变渲染方法的支持，如原版叶子？
    Mojang 是否计划允许方块剔除不仅在被不透明方块覆盖时进行，允许像原版玻璃那样的行为？

- **答**：我们很快会在学习门户发布一篇新文章，涵盖每种渲染方法的渲染距离，这样你就不需要猜测了。

    <@905553488510079026> 提到的渲染方法也会在现有的学习门户页面上添加，与其他方法一起（可能在一次文档更新中）。至于面剔除，你完全可以通过完整方块的面来复制原版玻璃的功能。

    复制玻璃需要两件事，你需要使用渲染方法：`alpha_test_single_side`*

    这将实现你期望的视觉效果，当你透过方块看时会取消方块的背面渲染。剔除规则会在旁边有完整面（如泥土）时移除相应的面，但你想要的视觉效果应该可以通过更改渲染方法实现。

    *编辑注：这是 Mojang 的一个错别字，意思是 `alpha_test_single_sided`

- **问**：我将这个问题单独提出，与https://discord.com/channels/523663022053392405/1277725678539640852/1277725678539640852相关：

    - 我想知道我们是否可以像原版叶子那样，根据相邻方块的情况动态改变方块的渲染方法。例如，如果原版叶子方块被实体方块围绕，它将改变其渲染方法以提高性能。
    - 对于像屏障、光块和结构空洞使用的渲染方法有什么看法？我经常需要为 Marketplace 制作看不见的碰撞方块或占位方块，能够有一些浮动的广告牌来看到它们的位置会很好。

- **答**：基于相邻方块重新渲染方法：我们正在研究许多邻接/连接功能，并尝试找到最佳支持方式，这当然是其中的一部分。

## PlayerInteractWithBlock

- **问**：我最近一个月或两个月没有参与附加包的工作了，但我记得（至少那时）我们在稳定版中无法与原版方块互动——你必须使用 itemUseOn，这需要持有物品，因为 PlayerInteractWithBlock 尽管在文档中列为稳定版，但仍处于测试阶段。这有变化吗？如果没有，我们应该期待将来稳定版中有这个功能吗？
- **答**：我们知道这个功能已经处于测试阶段比我们预期的时间长得多😕，但我们希望 PlayerInteractWithBlock 应该会在即将发布的版本中进入稳定版。我们对此有信心。
- **问**：能分享一下你们在此过程中发现的问题吗？
- **答**：对于玩家交互事件，我们在处理它们频繁重复且难以预测或甚至设备依赖的问题时遇到了困难……这使得 API 不可预测。

    我们考虑过对这个领域进行更大规模的重构，但考虑到所有相关行为和设备，这个重构被认为是“有风险”的。我们最终决定添加额外的数据（一个 isFirst 属性），这可以帮助创作者知道这是系列事件中的第一次交互。创作者可能仍然需要某种内部追踪器来判断这是他们第一次看到的事件，这并不理想。

- **问**：如果取消，方块无法被交互，玩家可以在不潜行的情况下在其上放置方块。如果我们希望方块仅在某些条件下可交互，这将非常有用。

    例如，我们可以让方块的南面可交互，而不允许其余面交互。

    因为当前，当存在 `onPlayerInteract` 时，整个方块都变得可交互。

- **答**：`onPlayerInteract` 事件是一个事后事件，但如果它是一个事前事件，我们可能能够取消交互。一个有趣的想法，但目前不在我们的路线图上，但值得研究。

## 通过方块排列召唤实体

- **问**：建议添加一个功能，让玩家可以通过特定的方块排列来召唤实体，类似于召唤凋灵或铁傀儡。这将通过引入独特的方块图案来扩展游戏玩法，引入新生物。
- **答**：对于这个，我可能会建议使用玩家放置方块之前的事件（https://learn.microsoft.com/en-us/minecraft/creator/scriptapi/minecraft/server/playerplaceblockbeforeevent?view=minecraft-bedrock-experimental），并对附近的方块模式进行一些匹配，以查看是否匹配，如果匹配则召唤实体。不确定我们是否会在近期推出类似的 JSON “数据驱动” 功能。

## 方块标签与 Java 的一致性

- **问**：如果能够获得各种标签，以便更容易通过脚本筛选方块，而不是逐个选择，这将非常好；同样也让自定义物品功能更容易，如自定义工具，因此在与方块互动时，可以通过一些原版标签进行操作。
- **答**：我认为我们很快会涉足这个领域™。

## 允许转换 -> 旋转以任意旋转设置

- **问**：目前，我们只能旋转方块的角度是 90 的倍数（如 0、90、180、270 以及负值）。所以我们无法选择旋转 45°，例如，为了使方块旋转 45°，我们必须创建一个旋转 45°的新模型。我建议这个字段的灵活性，以便我们不必为了更精确地旋转方块而创建新模型。
- **答**：我也认为这会违背 Minecraft 的视觉设计指南。所以绝对不希望做技术工作来实现这一点。

## 模型方块的纹理变化

- **问**：是否有计划允许自定义方块拥有变化的纹理？
- **答**：使用 `material_instances` 的自定义方块的纹理变体在我们的长期路线图上！

## 支持全区块几何体的环境光遮蔽

- **问**：目前，使用 `minecraft:geometry.full_block` 模型（或等效模型）的方块在环境光遮蔽方面的处理方式与典型的全区块不同。它们似乎会从其他方块捕捉阴影，但不会捕捉其他方块的环境光遮蔽，也不会投射自己的阴影或环境光遮蔽。

    最显著的是，这会影响任何需要按每面旋转纹理的方块状态。

    以下是使用自定义原木创建的示例，与原版橡木原木相比：
    https://media.discordapp.net/attachments/1215333861362237470/1278887412747079722/Kaleidoscope_003041.gif?ex=66d27037&is=66d11eb7&hm=65795e2b03ca8de6407dc969454b49caa6858443128815294641747f61fe7301&=&width=1258&height=702

    修复这一点将使创作者能够正确地重新创建大量自然原版方块，而不会因为视觉错误而牺牲那一丝代入感。（我终于可以添加我心爱的红杉树了！）

- **答**：这实际上对我来说似乎是一个错误？你愿意将该方块的 JSON 添加到这个线程中，我可以看看吗？但总体而言，关于其他“固实性”概念和全区块几何体的混合，我们正在考虑如何将“固实性”分成更逻辑的行为块，以便可以自定义。

## 摄像机碰撞组件

- **问**：一些方块——例如玻璃方块——在与摄像头碰撞时有不同于与实体的碰撞规则。能够重新创建这种行为会很棒，比如：

    ```json
    "minecraft:camera_collision": false
    ```

    …或者使用与 `collision_box` 或 `selection_box` 组件相同的属性。

- **答**：哦，有趣。

    需要澄清的是，你希望碰撞规则更像实体还是更像玻璃？
    换句话说，你想要重新创建的确切行为是什么？

## 自定义方块声音和方块/物品声音事件

- **问**：我认为目前没有任何方法可以向 `blocks.json` 定义中添加自定义声音类型，这是非常奇怪的。原版方块有简短的名称，引用它们在游戏中触发的声音事件（如步行、破坏、放置等）。

    例如：

    ```json
    "dirt_with_roots" : {
        "sound" : "dirt_with_roots",
        ...
    }
    ```

    非常非常希望至少能够定义 _自定义_ 名称以在这些定义中使用，并链接到默认方块事件的自定义声音。

    同样，更好的是能够有 **自定义** 的声音事件，以在这里和其他地方（如 `minecraft:record` 的 `sound_event` 属性）引用，或许添加类似的新增属性包括：

    - `minecraft:shooter`：
        - 完成使用时触发的声音事件，内置于定义中
    - `minecraft:food`：
        - 主动使用和完成使用时的声音事件，类似于原版蜂蜜瓶
    - `minecraft:wearable`：
        - 装备物品时的声音事件，类似于原版下界合金护甲

    …或许还有通过 Script API 从自定义方块/物品组件播放附加声音事件的方法？

- **答**：是的，我相信这都归结为能够添加自定义声音事件（而不是覆盖原版声音事件），对吗？我们正在跟踪这个问题……我会将这作为额外的 +1。这不在近期路线图上。

## 多重碰撞方块

- **问**：未来是否会有一种方法来拥有自定义的碰撞箱，或者有更好的制作方法。

    就像楼梯的碰撞箱与普通方块不同一样

- **答**：我们知道能够做需要比当前碰撞（和选择）箱组件更复杂的楼梯的需求，所以我们正在研究一些选项，允许我们将这些功能带给你！这在我们的长期路线图上。

## 禁用丝触

- **问**：我们已经可以通过脚本做到这一点，但它不太符合“原版”感觉。
    如果我们能够禁用方块在丝触时掉落，或改变丝触时的掉落物，那将很好。
- **答**：在自定义方块上，可以通过在掉落表中添加 `match_tool` 条件，包括丝触附魔来实现。
    [掉落表条件](https://learn.microsoft.com/en-us/minecraft/creator/documents/loottableconditions?view=minecraft-bedrock-stable#match_tool)

    在我们的短期路线图上有一种方法，可以在销毁时更改原版方块的掉落表。