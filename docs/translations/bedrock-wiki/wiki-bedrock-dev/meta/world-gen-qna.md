---
title: 世界生成问答 2024/11/15
category: 问答
mentions:
    - SmokeyStack
---

这次问答在 [基岩附加包 Discord](https://discord.gg/uZF75ZxcJq) 中进行。几位Mojang/Microsoft的员工加入我们，回答了关于自定义方块和物品API的问题。这些问题来自社区。

:::warning
并非所有消息都有完整复制，部分经过编辑。如果你想查看全部内容，请加入上述Discord，并获取“事件档案”角色。
:::

## 关于定位图的计划？

-   **Q**：我看到自定义拼图块的定位图是可能的，但是否有更多“官方”支持的计划（例如自定义图标/地图名称）？
-   **A**：这在我们的计划中，但短期内不会实现。

## 是否有计划更新原版结构以使用当前的拼图系统？

-   **Q**：如果有一天我们可以修改所有原版结构，如村庄、掠夺者哨站等，那将很酷。据我了解，它们使用的是拼图块的旧版本，或是完全不同的系统。但如果这些结构能像试验室遗迹和试验室房间一样迁移到我们当前的拼图系统，将会非常棒。我认为社区最喜欢的就是能更改每个原版结构。
-   **A**：我们希望将更多原版结构转换为使用新系统，但这不在近期或中期的路线图上。目前可以使用的原版结构是试验室房间和试验室遗迹。你希望先看到哪个？
-   **A**：还值得注意的是，本次问答的人员无法代表原版团队及其意图发言。

## 其他维度中的自定义生物群系

-   **Q**：当自定义生物群系回到基岩版时，会有更多对下界和末地的支持吗？据我所知，自定义末地生物群系以前从未存在过。
-   **A**：资源包中的 client_biome 设置（用于视觉和音频）现在应该适用于任何生物群系，包括下界和末地。对于影响行为和世界生成的内容，我们同意能够影响这些维度也是很好的，但目前没有相关的路线图。

## 是否会在自定义生物群系中添加自定义环境粒子的选项？

-   **Q**：当自定义生物群系仍能创建时，唯一可以在不使用外部方法的情况下添加粒子的是通过添加下界的粒子，但如果将来我们可以添加任何自定义粒子来设置生物群系，那将会很棒。
-   **A**：自定义环境粒子是我们过去考虑过的内容，也可能会被考虑。任何你能提供的关于如何使用它们的信息，我们都非常乐意接受。

## 自定义维度

-   **Q**：为未来的附加包引入新维度的能力，能够编辑整个维度，从高度限制到维度生成系统，就像Java版一样，在Java版中我们可以非常轻松地创建自定义维度，如果基岩版也有这个功能，那将非常好。
-   **A**：我们确实认为自定义维度对创作者很重要，但与此同时，我们正在专注于世界生成的许多元素。

    近期，我们计划在功能和拼图结构以及更多能力上进行构建，朝着更多生物群系自定义迈进。

## `/place feature` 命令

-   **Q**：未来是否会有使用命令放置地物的选项？
-   **A**：这在我们的短期路线图上！

## 我们能否为拼图块增加块宽度？

-   **Q**：128太小了，我个人需要一个是其6倍大小的数字用于市场项目。如果不行，是否可以按拼图结构自定义此选项。
-   **A**：128并不是严格的限制。然而，当我们生成一个区块时，我们会检查最多8个区块，以允许更大的结构生成并构建到该区块中。但由于性能问题，超过128可能会有些令人担忧。另一点是，这是从中心计算的，而不是总数！意思是128是半宽，而不是全宽，即256。😄

## Molang会有性能增强吗？

-   **Q**：使用Molang的3D噪声进行自定义地形生成很容易导致世界加载时间达到5分钟甚至更长，即使你只使用1种方块类型和1个地物及其规则，说实话，时间太长了。
-   **A**：我们正在研究q.noise的性能，看看是否可以做更多事情，比如缓存它以提高性能。在此期间，建议尽量少用它。

## 为什么拼图块花了这么久？

-   **Q**：我们很久以前就有拼图块了……为什么它从未完全功能化/为什么使其功能化花了这么长时间？

    我只是好奇为什么我们多年来一直使用一个半成品的解决方案，是否有原因你们当时放弃了添加拼图块？

    你们最终启用创作者使用它们的动机是什么？

-   **A**：说实话，以前有时我们会在平台功能上工作，但未能以令人满意或及时的方式完成——例如节日创作者功能。在大多数情况下，这意味着我们需要在将功能纳入稳定平台方面做得更好，尽管在某些情况下，如果实验看起来不会成功，我们可能需要更快地停止实验。我们正在努力在开始后将功能纳入平台，尽管我确定我们不会完美。

    关于现在为什么有拼图块，我们有一个能力积压，正在努力为平台添加功能供人们使用，现在我们正在处理一些基本的世界生成内容。在推出这些功能之前，我们通常需要进行大量的更新，以稳定该领域，使其更具可升级性、性能更高，并能容忍你们所有将要构建的内容（甚至会有很多东西可能会破坏）……

## 自定义结构中的生成点

-   **Q**：以前的结构框架的一个缺点是我们无法放置实体或创建生成点（这是下界要塞、海洋纪念碑和其他结构重复生成实体的方式）。我通常会创建一个计时方块，生成一个实体并删除自己，但这可能会导致一些问题。

    随着结构得到一些改进，拼图块变得可用，我们现在能够在结构中放置实体，但是否计划为世界生成框架添加生成点支持？

-   **A**：大家好！喜欢这里的讨论。这目前正在进行中！不过考虑到怪物生成系统有点微妙（**咳嗽**农场），我们希望尽一切努力平滑这些边缘。所以……这意味着需要更多测试。期待更多内容即将在实验版中推出！
-   **Q**：这是否意味着生成率能够与Java版持平？
-   **A**：这是我们的目标！一旦我们将其纳入实验版（很快），我们肯定需要尽可能多的帮助，以确保世界仍然看起来平衡，生成不会出错。这包括对怪物农场的任何影响/改进。

## 结构碰撞

-   **Q**：人们一直在使用的系统作为解决方法，比如生成实体，或使用命令方块生成结构（或者例如在创建地牢时生成一系列结构），总是有碰撞的可能性，尤其是地下结构，可能会与其他结构相交，破坏它们。

    例如，试验室房间可能会与其他结构相交，破坏它们。我希望看到一个功能，使用拼图块以及一般结构，可以防止这种碰撞发生。

    我想知道Mojang团队对此的看法。

-   **A**：大家好！这确实在我们的计划中，尽管目前还没有具体的工作计划，特别是因为这里有一个更深层次的问题。

## 目录结构的担忧

-   **Q**：使用新的拼图系统，所有相关文件都放在 `worldgen` 下。是否有计划将 `structures`、`features`、`feature_rules` 和 `biomes` 移动到这个文件夹中？拼图集为什么在 `worldgen` 下，还是仅仅是为了对称性？
-   **A**：我们将拼图相关的内容分组在一起，因为这些文件在逻辑上属于拼图相关内容。“worldgen” 作为分组文件夹的名称在功能和功能规则在外部的情况下是一个……有趣的选择；我们可能会在未来调整其他文件或文件夹，但目前没有计划将功能和功能规则等内容移入其中。

## 拼图工具查询

-   **Q**：拼图块是否是制作自定义大型矿脉（类似铁和铜巨型矿脉）的有效方式？

    或者，部分暴露的斑点地物方法会更好？

-   **A**：我们有 `minecraft:ore_feature` 来支持自定义矿脉，那里是否有缺失的功能可以帮助你实现预期的结果？

## 脚本

-   **Q**：是否有计划在世界生成中启用脚本集成？例如可以根据世界事件修改结构放置或内容的脚本。
-   **A**：我们正在探索一些可能将脚本与世界生成集成的方法，但如你们所指出的，这有点困难，因为它不利于性能，比如让脚本“掌控”显著部分的区块生成。成套的深度循环很快就会变慢 🙂

    但也许有些地方我们可以调用脚本来“做出决策”。不过，目前还不知道脚本是否会在世界生成的短期路线图中。

    几年前我尝试用脚本构建一个地牢生成器的第一个演示时，发现很难使其工作，因为大部分逻辑是关于如何在刻度间隔内分时切块放置（还要处理区块加载语义）以构建东西。

    从那时起，脚本在生成器函数方面有了一些支持，以利用一个刻度中的空闲周期——也许如果将其使用限制在高性能设备（强大的专用服务器）或你真正优化过——它可能是相当可行且很棒的。我知道社区中有些人已经在这方面构建了一些很酷的东西。

-   **A**：我在其他地方聊过，但我们一个有趣的原型是使用webworker模型在其他线程上运行JavaScript来处理世界生成等任务。

    一个不错的想法是提供不同的API接口（可以导入的不同模块），用于特定的世界生成相关API。

    这些现在只是有趣的想法，但也许有一天会实现！

## Mojang团队最期待看到这些新工具赋予创作者后看到什么？

-   **A**：我非常期待各种地牢、传说和故事。如此之多的内容即将解锁……👀

## 结构方向

-   **Q**：我们是否能够处理拼图结构的旋转？如果可以，如何实现？我们能否确保结构总是与某些特征对齐？比如山坡或河流？还是只是一个简单的条件处理器？
-   **A**：我们收到了来自上次预览的创作者的反馈，并且在我们的计划中！话虽如此，你具体想到哪些场景？

-   **Q**：

    > 你具体想到哪些场景？

    随机结构旋转是必须的，除非你有更深的理由让每个结构都朝北。而且像Ciosciaa说的，另一个问题是自定义方块不会旋转。

-   **A**：有道理。我相信我们已经讨论过结构旋转的问题。我会开始讨论将其添加到我们已经有的结构改进列表中！

## 为什么不允许使用 `conditional_list` 和 `sculk_patch_feature` 功能？

-   **Q**：我知道 `conditional_list` 被移除了，但为什么还没有恢复？为什么从未允许使用 `sculk_patch_feature`？
-   **A**：`conditional_list` 需要更多工作以使其稳健——我们正在考虑它可能适合的位置。`sculk_patch_feature` 最终太过于原版导向；我们可能会在某个时候寻找一个更通用的替代方案。
-   **Q**：这是否意味着你们反对未来非常原版导向的功能类型？树木功能毕竟是存在的。
-   **A**：一般来说，我会说在某个能力是通用平台功能（很棒！）、类似原版，以及过于原版导向以至于不适合作为稳健的平台项目需要重新考虑之间有一条模糊的界线。我想目前边界大概就是这样 🙂

## 是否会添加Java版缺失的拼图功能？

-   **Q**：Java版的拼图结构有一些看似不存在的功能：
    -   从结构中放置地物（即 `minecraft:feature_pool_element`）
    -   模板池别名（Java版使用它来选择试验室房间具有哪组试验生成器，基岩版如何处理这些？）
-   **A**：大家好！正如你们注意到的，我们在新的拼图系统中有生成覆盖，但还不是数据驱动的，尚未完全数据驱动的拼图结构。团队目前正在努力简化生成规则，然后再完全公开该生成系统。
-   **Q**：

    > 团队目前正在努力简化生成规则

    整个系统？也就是说，实体BP JSON文件中的难以捉摸的 `spawn_category` 和整个 `spawn_rules` 文件夹？这是否意味着简化后再扩展功能？

-   **A**：是的——像所有重构一样，必须先从基础系统开始。我们接近使怪物生成系统与Java版持平。同时，我们正在简化生成规则，以便在公开这些功能时，它们会更易于使用！

## 更新世界生成到新版本的选项

-   **Q**：是否会有更智能的选项来更新你的世界？因为结构生成对我来说有点麻烦，当有新结构更新时，我需要前往新区块寻找它们，有些甚至被现有区块“吞噬”。

    这个问题的重点是，是否有一个选项可以检测空区块（未更改的，仅被探索过的，或略有更改的区块）以用新结构更新？那将会很好。

-   **A**：我们考虑过这个！但要以一种不会产生很多奇怪副作用的方式实现真的很难（正如上面一些人提到的）。
    但我们很感兴趣！如果这是可能的，你会将此功能用于测试目的，还是需要用于游戏内世界目的？

## 自定义超平坦生成器

-   **Q**：在Java版有自定义超平坦生成器。基岩版没有这样的系统，这在反馈网站上也被高度请求：https://feedback.minecraft.net/hc/zh-cn/community/posts/360009373731--Java-Parity-Custom-World-generator-Superflat-worlds

    这对各种玩法都很有用，也对市场有用（一些市场地图已经通过从Java复制世界来实现某种超平坦）。

    如果实现了这样的系统，是否也允许生物群系和结构支持？

-   **A**：这目前不在路线图上。如果我们将其从Java移植过来，可能需要与原版团队进行一些基岩特定的设计更改，就像我们在适应硬核模式时所做的那样。

## 在特定方块上放置地物规则

-   **Q**：前一段时间我想创建一块岩石，我希望它只替换在石头方块上方的空气，如果能在地物规则中添加一个新的声明，比如

    place_above

    place_under

    那将对世界生成有很大帮助。

-   **A**：我相信你在寻找 `minecraft:single_block_feature`，带有 `may_attach_to` “top” 和 “bottom” 选项。如果该选项不能给你足够的控制，请告知。

    你可以将其打包到聚合地物或顺序地物中，如果你想在该位置使用更多地物。

## 通过命令或附加包更改生物群系

-   **Q**：所以，我们有一个功能（我猜）可以通过世界文件更改生物群系，未来是否会有能力在游戏中立即更改它们，甚至通过附加包？
    例如

    /Fill biome ~50 ~50 ~50 ~-50 ~-50 ~-50 plains

    现在我在这些坐标范围内的所有内容都将是平原生物群系。

    这可以用于更改天气类型，如降雪和降雨，除非Mojang未来添加更多。

    （另一个例子是怪物）

-   **A**：我们已经研究过Java中的 `fillbiome` 命令，但需要在基岩版方面解决很多问题，才能知道这是否可能实现。

## Mojang团队对世界生成改进的思维方式是什么？

-   **Q**：我很好奇团队如何看待世界生成（数据驱动的生物群系、维度、拼图改进等）在更广泛的意义上。

    改进是尽快发布到测试版，还是慢慢进行，为什么？
    
    团队是否担心预览版本中破坏世界？
    
    （长期）世界生成是否在朝着完全自定义化努力？哪些部分优先开发？
    
    在任何世界生成过程中遇到过哪些障碍（决定最佳实践、长期与短期、技术难题）？
    
    考虑到基岩世界生成与Java版的关系和区别如何？

    抱歉有这么多子问题，我很好奇！❤️<:bao_logo_mojang:1071082722807791696>

-   **A**：很多子问题！我会尝试回答其中几个。

    作为一个团队，我们总是尽量以迭代的方式工作。我们希望定期发布小功能，以便能从大家那里获得反馈。

    预览中破坏世界 —— 我们尽量避免。但我们不会对预览版本保持与零售版本相同的严格性。因此，预览版本对玩家来说总是有点风险。

    从长期来看，我们的原则之一是，创作者应该能够做几乎所有我们（Mojang）能在原版游戏中做的事情。所以这是非常广泛的自定义。但这是理想化的，实现起来我们还有很长的路要一起走。我们会逐步发布增量功能。

    哪些部分优先？我认为在其他讨论中已经在讨论了。

    基岩版 vs. Java版 —— 基岩版需要考虑的事情更多。很多差异归结为：

    -   跨平台，以及不同的计算能力
    -   向后兼容性和多附加包兼容性

    这需要我们花更多时间思考如何在基岩版中实现，因为它必须适用于更多的情况。

## 世界生成路线图

-   **Q**：一段时间以来，玩家们了解了Mojang在做什么，什么在保密中，或者他们在考虑什么。但非市场关联的创作者不知道会发生什么，除非有人要求时间表或它被发布。我希望我们能有一个1年的时间表，这样我们就可以开始学习或准备相关内容。

    我不介意事情被延迟；我只是希望了解你们在考虑或积极工作什么。

-   **A**：世界生成的路线图会比较长。我们现在开始着手其中的一些元素——改进方块功能和能力（见之前的问答 😊），然后是嵌入世界的方式（功能、拼图结构）。接着，我们确实想开始提供生物群系的能力。

    现在原版中的生物群系工作复杂，找到一个可行的解决方案一直有挑战，但我们正在积极努力。我们不知道时间表可能是什么样，但希望在明年分享更多潜在设计。

    至于生物群系可能包含什么，我们了解到许多技术需求：噪声图、比例、天气、雾、音频等等。我们的目标是一个稳健的解决方案，考虑到你的需求。我们希望了解你对生物群系的5-10个必备或应该具备的需求！

## 是否有计划修复结构模板功能尺寸限制？

-   **Q**：实际上限制是48x48，因为区块，有什么计划修复或增加尺寸限制吗？
-   **A**：抱歉回复晚了，但基于区块尺寸和世界生成的方式，提高这个限制有点复杂。我认为我们建议对于更大的结构，大家可以考虑使用拼图结构系统。

## 为什么没有生成结构的切换选项？

-   **Q**：我对未来更多可能的世界生成特性感到非常兴奋，我想知道基岩版缺乏生成结构的切换是否与自定义世界生成正在开发中有关，或者只是优先级较低。当使用附加包自定义我的游戏时，我经常希望能更改或移除原版结构。抱歉如果无法回答，我不知道附加包和世界设置的开发有多紧密。
-   **A**：喜欢这里的讨论。要真正解锁自定义世界生成各个方面的能力，我们需要自定义生物群系。这将有助于我们添加API到世界生成的部分，通常我们无法触及那些部分而不采取很hacky的方式。

## 子区块？

-   **Q**：我很好奇你们对子区块的看法。你们是否计划将功能切换到子区块？也许基础生成？两者都有？你们是否考虑过如果这样做，你们可能会改变什么（例如高度图）？

    我觉得如果后来支持自定义维度，使用常规区块对有大范围的维度来说会很麻烦。我知道重写整个世界生成系统以使用子区块说起来容易做起来难，但我认为从长远来看，这是值得的投资。

-   **A**：使用 `feature_rule` 的坐标范围功能，你今天可以手动完成此操作。你需要生成4个 `feature_rule`，以对不同的16x16部分设置不同的范围（例如：“extent”: [ 0, 15 ]，“extent”: [ 16, 32 ]，用于X和Z）。

    我们目前的路线图上没有任何专门针对子区块的功能。

## 市场

-   **Q**：你们打算向市场添加结构和矿物生成吗？
-   **A**：是的，我们希望允许在市场附加包内容中使用功能/功能规则。

    可能会在性能等方面有一些限制。但……也很难通过政策来规范“请不要在不有趣的方式上过度使用”。我认为我们需要看看是否会出现对玩家不好的模式，需要我们进行缓解。

## 更多自定义地物类型

-   **Q**：Mojang会扩展实际可自定义的地物吗？比如创建一个自定义骨粉斑点并使用 `/place feature` 来使用它，或者创建一个自定义滴石柱地物，而不是使用结构？
-   **A**：我们目前没有计划添加更多地物类型，但你所建议的很多内容可以通过现有地物的组合来实现。例如，滴石柱可以是顺序地物或单一方块地物。如果你想在该位置使用不同高度，可以使用加权随机地物的顺序地物组合。

    而 `/place feature` 在我们的短期路线图上！

## 稳定拼图块的计划

-   **Q**：我想知道是否有计划在接下来的几个月内稳定拼图块？拼图块的API肯定还需要调整，但我们会在几个月内看到拼图块脱离实验阶段吗？（2-4个月）
-   **A**：嗨，Lucy——喜欢你的问题！我们正在积极从社区反馈中学习需要调整的内容。所以对所有可爱的拼图构建者——请尽情使用！没有压力测试，我们不知道需要调整什么。

## 处理器列表的更广泛应用

-   **Q**：这些都很棒。目前，确实没有任何系统能够方便地修改一堆方块数据。将处理器列表应用到以下地方会很不可思议：

    -   作为 `fill` 命令及相关脚本API的一部分
    -   作为 `structure` 命令及相关脚本API的一部分
    -   作为结构模板地物的一部分（或者也许是 _任何_ 地物类型？）
    -   甚至 _独立_，作为一种转换已存在于世界中的给定体积的方法（如在指定坐标范围内的填充命令）

    集成到现有系统中将大大提升这些系统的功能，并使方块处理/转换更加方便。

-   **A**：嗨，Ciosciaa——我同意！这看起来是一个很棒的想法，我们目前的路线图上没有这个，但一定会记下来 <:bao_bee:937587347124535346>

## 拼图文件结构很奇怪？

-   **Q**：几周前实现的拼图系统几乎是Java版在基岩版中注册文件包装器的直接复制。我想知道为什么会这样。我一周前在 https://discord.com/channels/523663022053392405/1303973556476055592 查看过。

    本质上，我想知道团队是否认为更晦涩、不熟悉的Java风格界面是否超过了更直观和熟悉的设计。

-   **A**：嗨，Ciosciaa！很好的问题和见解。我们一直在努力使基岩系统更加接近Java版。~~~~我相信目前的基岩系统实际上看起来像你下面提出的想法！~~抱歉——那可能是我们的一个原型或设计。你有没有具体的建议？

    哦，抱歉，“可能的想法”那个看起来像是我们在旁边考虑的东西，但你在“现有”下的内容是我们现在的系统。当前系统是否使用起来不方便或令人困惑？

-   **Q**：主要是晦涩和不熟悉。但有时也很奇怪……

    -   为什么随机化测试与通过 `minecraft:random_block_match` 进行的方块测试一起打包？
    -   即使上述内容 **应该存在**，为什么 `minecraft:random_block_match` 也是一个存在的选项？为什么不在 `minecraft:block_match` 上添加 `probability` 并将其默认设置为 `1`？
    -   为什么规则处理器上需要 `output_state`，如果我只是想将战利品绑定到通过 `input_predicate` 选择的方块类型？
    -   `{"predicate_type": "minecraft:always_true"}` 作为一个基础/默认有点过多。😅
    -   `location_predicate` 和 `position_predicate` 在命名上令人困惑，但它们的含义完全不同。

    我会说，尽管我喜欢处理器列表的想法（https://discord.com/channels/523663022053392405/1307025062830014535），但这是目前基岩版上最让人困惑的文件架构。

-   **A**：很好的见解和反馈，Ciosciaa！正在提交给团队 🫡